!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="542e0d7c-d46c-4aee-aba7-e38d69079bca",e._sentryDebugIdIdentifier="sentry-dbid-542e0d7c-d46c-4aee-aba7-e38d69079bca")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"ec45b404"},(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7428],{36335:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/postsFeed",function(){return t(3001)}])},3001:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return ek}});var l=t(27387),r=t(42516),i=t(66626),a=t(96583),o=t(74985),s=t(907),u=t(57509),c=t(87041),d=t(49122),p=t(82922),h=t(27382),f=t(16691),g=t(54854),v=t(41733),m=t(30509),y=t(63257),Z=t(71166),_=t(60305),b=t(85638),G=t(82230),P=t(94778),w=t(29318),x=t(72093),k=t(85421),C=t.n(k),R=t(50959),A=t(21262),B=t(71440),S=t(75728),T=t(33204),U=t(46779),X=t(58995);function W(){var e=(0,A._)(["\n  fragment ReplPostCurrentUser on CurrentUser {\n    id\n    ...LikeButtonCurrentUser\n    ...ReplViewReplActionsCurrentUser\n  }\n  ","\n  ","\n"]);return W=function(){return e},e}function L(){var e=(0,A._)(["\n  query ReplPostsFeed($options: ReplPostsQueryOptions) {\n    currentUser {\n      ...ReplPostCurrentUser\n    }\n    replPosts(options: $options) {\n      pageInfo {\n        nextCursor\n      }\n      items {\n        id\n        ...ReplCardPostPost\n      }\n    }\n  }\n  ","\n  ","\n"]);return L=function(){return e},e}var N={},D=(0,B.Ps)(W(),S.wO,T.o3),O=(0,B.Ps)(L(),D,U.mx),E=t(82870);function F(e){var n,t=(n=(0,v._)({},N,{variables:{options:e},notifyOnNetworkStatusChange:!0,context:{noBatch:!0}}),X.a(O,n)),l=t.loading,r=t.data,i=t.error,a=t.fetchMore,s=(0,Z.Z)({onLoadMore:function(){return f&&g()},rootMargin:"0px 0px 1000px 0px"}).targetRef,u=(0,k.useRouter)();if(i)return(0,o.tZ)(G.xv,{multiline:!1,children:i.message});var c=null==r?void 0:r.replPosts,d=(null==r?void 0:r.currentUser)||void 0;if(!c&&l)return(0,o.tZ)(P.G,{css:[x.l0.py(64),x.l0.center],children:(0,o.tZ)(w.Z,{size:32})});if(!c)return null;var p=c.items,h=u.asPath.split("?")[0],f=c.pageInfo.nextCursor;function g(n){n&&n.preventDefault(),l||((0,_.j)(_.U3.POSTS_LOAD_MORE_CLICKED,{board:"all"}),a({variables:{options:(0,m._)((0,v._)({},e),{after:f})},updateQuery:function(e,n){if(!n||!(null==n?void 0:null===(t=n.fetchMoreResult)||void 0===t?void 0:t.replPosts.items))return e;var t,l=n.fetchMoreResult,r=e?e.replPosts.items:[],i=(0,v._)({},l),a=l.replPosts.items;return a.length>0&&u.replace({pathname:u.pathname,query:(0,v._)({},u.query)},{pathname:h,query:{}},{shallow:!0}),i.replPosts.items=(0,y._)(r).concat((0,y._)(a)),i}}))}var C=e.searchQuery&&p?p.length:null;return(0,o.BX)(P.G,{css:[x.l0.colWithGap(32)],children:[(0,o.BX)(P.G,{css:[x.l0.colWithGap(16)],children:[null!==C&&C>0?(0,o.tZ)(G.xv,{color:"dimmer",multiline:!1,children:"REPLS AND POSTS FOUND"}):null,null!==C&&0===C?(0,o.tZ)(G.xv,{color:"dimmer",multiline:!1,children:"No Repls or Posts Found"}):null,(0,o.tZ)(P.G,{css:[x.l0.colWithGap(32)],children:p.map(function(e){return(0,o.tZ)(E.Z,{post:e,currentUser:d||void 0},e.id)})})]}),(0,o.tZ)(P.G,{css:[x.l0.center],children:l?(0,o.tZ)(w.Z,{}):f&&(0,o.tZ)(b.Z,{as:{pathname:h,query:{after:f}},href:{pathname:u.pathname,query:(0,m._)((0,v._)({},u.query),{after:f})},onClick:g,text:"Load more",ref:s})})]})}var M=t(79842),V=t(22224),$=t(42074),q=t(14051);function I(e){var n=e.posts,t=e.tags,l=e.currentUser,r=e.search,i=e.currentTags,a=e.loading;return(0,o.BX)(P.G,{css:[x.l0.colWithGap(32)],children:[(null==i?void 0:i.length)?null:(0,o.tZ)(j,{tags:t}),(0,o.BX)(P.G,{css:[x.l0.colWithGap(16)],children:[n.length>0?(0,o.tZ)(Q,{children:"REPLS AND POSTS FOUND"}):null,0!==n.length||a?null:(0,o.BX)(P.G,{css:[x.l0.display.block],children:[(0,o.tZ)(G.xv,{color:"dimmer",children:'No Repls or Posts found for "'}),(0,o.tZ)(G.xv,{children:r}),(0,o.BX)(G.xv,{color:"dimmer",children:['"',(null==i?void 0:i.length)?(0,o.BX)(o.HY,{children:[" in ",i.map(function(e){return"#"+e.id}).join(", ")]}):null]})]}),(0,o.tZ)(P.G,{css:[x.l0.colWithGap(64)],children:n.map(function(e){return e.title?null:(0,o.tZ)(E.Z,{post:e,currentUser:l||void 0},e.id)})})]})]})}function Q(e){var n=e.children;return(0,o.tZ)(G.xv,{color:"dimmer",multiline:!1,children:n})}function j(e){var n,t=e.tags;return t.length?(0,o.BX)(o.HY,{children:[(0,o.BX)(P.G,{css:[x.l0.colWithGap(16),(0,r._)({},q.A.desktop,[x.l0.display.none])],children:[(0,o.tZ)(Q,{children:"TAGS FOUND"}),(0,o.tZ)(V.Z,{gap:8,inset:16,css:[(n={},(0,r._)(n,q.A.desktop,[x.l0.display.none]),(0,r._)(n,"marginLeft","calc(-1 * ".concat(x.TV.space16,")")),(0,r._)(n,"marginRight","calc(-1 * ".concat(x.TV.space16,")")),n)],children:t.map(function(e){return(0,o.tZ)($.t,{tag:e,link:(0,M.M6)(e.id)},e.id)})})]}),(0,o.BX)(P.G,{css:[x.l0.colWithGap(16),(0,r._)({},q.A.mobile,[x.l0.display.none])],children:[(0,o.tZ)(Q,{children:"TAGS FOUND"}),(0,o.tZ)(P.G,{css:[x.l0.flex.row,x.l0.flex.wrap,{margin:"calc(-1 * ".concat(x.TV.space8,")")}],children:t.map(function(e){return(0,o.tZ)(P.G,{css:[x.l0.m(4)],children:(0,o.tZ)($.t,{tag:e,link:(0,M.M6)(e.id)})},e.id)})})]}),(0,o.tZ)(P.G,{css:{borderTop:"1px solid "+x.TV.outlineDimmest}})]}):null}var H=t(22222),z=t(14872),Y=t(3212),K=t(34809);function J(){var e=(0,A._)(["\n  query ReplPostsSearch(\n    $options: ReplPostsQueryOptions\n    $tagsSearch: String!\n    $tagsLimit: Int = 50\n  ) {\n    currentUser {\n      id\n      ...ReplViewReplActionsCurrentUser\n    }\n    replPosts(options: $options) {\n      pageInfo {\n        nextCursor\n      }\n      items {\n        id\n        ...ReplCardPostPost\n      }\n    }\n    tagGroups {\n      official(search: $tagsSearch, limit: $tagsLimit) {\n        id\n        ...PostsFeedNavTag\n      }\n      community(search: $tagsSearch, limit: $tagsLimit) {\n        id\n        ...PostsFeedNavTag\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return J=function(){return e},e}var ee={},en=(0,B.Ps)(J(),T.o3,U.mx,K.M),et={value:"",loading:!1,result:{tags:[],posts:[]}};function el(e,n){switch(n.type){case"data":var t=n.data,l=t.tagGroups,r=t.replPosts,i=t.currentUser,a=(0,y._)(l.official).concat((0,y._)(l.community)),o=r.items;return(0,m._)((0,v._)({},e),{loading:!1,result:{currentUser:i,tags:(0,Y.Z)(a,{existing:e.result.tags,getKey:function(e){return e.id}}),posts:(0,Y.Z)(o,{existing:e.result.posts,getKey:function(e){return e.id}})}});case"value":return(0,m._)((0,v._)({},e),{loading:!!n.value,value:n.value});case"clear":return et}}var er=t(15235),ei=t(19068),ea=t(45271),eo=t(39667),es=t(64479),eu=t(60772),ec=t(49224),ed=t(17519),ep=t(29252),eh=t(76171),ef=t(11894),eg=t(85438),ev=t(47336),em=t.n(ev),ey=t(85080);function eZ(){var e=(0,A._)(["\n  fragment PostsFeedPageTag on Tag {\n    id\n    ...PostsFeedNavTag\n  }\n  ","\n"]);return eZ=function(){return e},e}function e_(){var e=(0,A._)(["\n  query PostsFeedPage {\n    currentUser {\n      id\n    }\n  }\n"]);return e_=function(){return e},e}function eb(){var e=(0,A._)(["\n  query PostsFeedPage2($limit: Int, $tags: [String!]!) {\n    currentUser {\n      id\n      ...ReplViewReplActionsCurrentUser\n      hasPrivacyRole\n      hasRepl\n    }\n    tags(tags: $tags) {\n      id\n      ...PostsFeedPageTag\n    }\n    tagGroups {\n      official(limit: $limit) {\n        id\n        ...PostsFeedPageTag\n      }\n      community(limit: $limit) {\n        id\n        ...PostsFeedPageTag\n      }\n    }\n  }\n  ","\n  ","\n"]);return eb=function(){return e},e}var eG={},eP=(0,B.Ps)(eZ(),K.M);e_();var ew=(0,B.Ps)(eb(),T.o3,eP),ex=(0,ec.X)({cardLinkContainer:[x.l0.colWithGap(8),(0,r._)({},x.BC.max("tabletMin"),[x.l0.display.none])],createButton:[x.l0.justify.center],cardLink:[x.l0.focusRing,x.l0.borderRadius(12),ei.gU.filled,x.l0.colWithGap(12),x.l0.justify.center,x.l0.align.center,x.l0.position.relative,x.l0.color.foregroundDefault,{display:"flex",flex:1,height:"100%"}],buttonLinkContainer:[x.l0.rowWithGap(12)],buttonLink:[(0,r._)({flex:1},x.BC.min("tabletMin"),[x.l0.display.none])],publishModal:[(0,r._)({},x.BC.max("tabletMin"),[x.l0.width("100%")])]}),ek=function(){var e,n,t,y,Z,_,w,A,B,S,T,U,W,L,N,D,O,E,V,Q,j,Y,K,J=(0,k.useRouter)(),ei=(0,H.Qf)(J.query),ec=(0,s.x)(),ev=(e={variables:{tags:ei.tags||[],limit:10}},n=(0,v._)({},eG,e),X.a(ew,n)),eZ=ev.data,e_=ev.previousData,eb=!!((null==eZ?void 0:eZ.currentUser)||(null==e_?void 0:e_.currentUser)),eP=!!((null==eZ?void 0:null===(N=eZ.currentUser)||void 0===N?void 0:N.hasRepl)||(null==e_?void 0:null===(D=e_.currentUser)||void 0===D?void 0:D.hasRepl)),ek=(0,i._)((0,R.useState)("none"),2),eC=ek[0],eR=ek[1],eA=(0,i._)((0,R.useState)(!1),2),eB=eA[0],eS=eA[1],eT=function(){eR("none"),eS(!1)},eU=(null==eZ?void 0:eZ.tagGroups)||(null==e_?void 0:e_.tagGroups),eX=(null==eZ?void 0:eZ.tags)||(null==e_?void 0:e_.tags),eW=(y=(t={initialValue:ei.searchQuery,currentTags:eX}).initialValue,Z=t.currentTags,w=(_=(0,i._)((0,R.useReducer)(el,(0,m._)((0,v._)({},et),{value:void 0===y?"":y})),2))[0],A=_[1],U=(S={variables:{tagsSearch:B=(0,z.Z)(w.value,200),options:{searchQuery:B,tags:(null==Z?void 0:Z.length)?Z.map(function(e){return e.id}):void 0}},skip:!B,notifyOnNetworkStatusChange:!0},T=(0,v._)({},ee,S),X.a(en,T)).data,(0,R.useEffect)(function(){U&&A({type:"data",data:U})},[U]),W=(0,R.useCallback)(function(e){A({type:"value",value:e})},[A]),L=(0,R.useCallback)(function(){A({type:"clear"})},[A]),{loading:w.loading,value:w.value,setValue:W,result:w.result,clear:L}),eL=(0,i._)(J.asPath.split("?"),1)[0];(0,f.Z)(eW.clear,[eL,eW.clear]),(0,R.useEffect)(function(){if(!eW.loading){var e,n=(0,H.Qf)(C().query);if((n.searchQuery||null)!==(eW.value||null)){if(eW.value){var t=(0,M.nr)(eW.value,n);C().push(t.href,t.as,{shallow:!0});return}var l=(null===(e=n.tags)||void 0===e?void 0:e.length)?(0,M.M6)(n.tags.join(",")):(0,M.L8)();C().push(l.href,l.as,{shallow:!0})}}},[eW.loading,eW.value]);var eN={from:"feed",location:"publish-button"},eD=(0,o.BX)(P.G,{css:[x.l0.rowWithGap(16),x.l0.align.center,x.l0.justify.spaceBetween,(E={},(0,r._)(E,q.A.mobile,[x.l0.pb(16)]),(0,r._)(E,q.A.desktop,[x.l0.pb(32)]),E)],children:[(0,o.tZ)(P.G,{css:[x.l0.flex.growAndShrink(1),(0,r._)({},q.A.desktop,[x.l0.maxWidth(280)])],children:(null==eX?void 0:eX.length)===0?(0,o.tZ)(eo.E,{loading:eW.loading,value:eW.value,onChange:function(e){return eW.setValue(e.currentTarget.value)},onClear:eW.clear,placeholder:"Search for Repls, Posts, and Tags"}):null}),eW.value?null:(0,o.tZ)(P.G,{children:(0,o.tZ)(ef.P,{id:"",items:[{value:eg.vX.Top,title:eg.vX.Top},{value:eg.vX.New,title:eg.vX.New}],initialSelectedItem:{value:ei.order,title:ei.order},onChange:function(e){var n=(0,M.QH)(e.value,ei);J.push(n.href,n.as)}})})]});return(0,o.tZ)(d.Z,{title:"Community",description:"Your place to share and discover Repls",children:(0,o.BX)(es.Tg,{css:[x.l0.pageContent,(V={},(0,r._)(V,q.A.mobile,[x.l0.colWithGap(16)]),(0,r._)(V,q.A.desktop,[x.l0.colWithGap(24)]),V)],children:[(0,o.BX)(P.G,{css:[x.l0.colWithGap(16)],children:[(0,o.BX)(P.G,{css:[(Q={},(0,r._)(Q,q.A.mobile,[x.l0.colWithGap(16)]),(0,r._)(Q,q.A.desktop,[x.l0.align.center]),Q),[x.l0.rowWithGap(8),x.l0.justify.spaceBetween]],children:[(0,o.BX)(P.G,{css:[(j={},(0,r._)(j,q.A.mobile,[x.l0.colWithGap(8)]),(0,r._)(j,q.A.desktop,[x.l0.rowWithGap(16),x.l0.align.center]),j)],children:[(0,o.tZ)(G.h4,{level:1,variant:"headerBig",children:"Community"}),(null==eX?void 0:eX.length)?(0,o.tZ)(P.G,{css:[x.l0.rowWithGap(8),x.l0.flex.growAndShrink(1)],children:eX.map(function(e){var n=eX.filter(function(n){return n.id!==e.id}),t=n.length?(0,M.M6)(n.map(function(e){return e.id}).join(",")):(0,M.L8)();return(0,o.tZ)($.t,{tag:e,link:t,isActive:!0},e.id)})}):null]}),(0,o.tZ)(P.G,{children:(null==eZ?void 0:null===(O=eZ.currentUser)||void 0===O?void 0:O.hasPrivacyRole)?null:(0,o.tZ)(er.zx,{iconLeft:eP&&eb?(0,o.tZ)(eh.Z,{}):(0,o.tZ)(ep.Z,{}),css:ex.createButton,size:"big",colorway:"primary",text:eP&&eb?"Publish a Repl":"Create a Repl",onClick:function(){eb?eP?eR("publish"):eR("create"):(eR("none"),(0,u.Vu)(J,eN))}})})]}),(0,o.BX)(P.G,{css:[x.l0.flex.row,x.l0.pt(6),(0,r._)({gap:x.TV.space16,overflow:"auto","> *":[{minWidth:"240px !important",scrollSnapAlign:"start"}],"::-webkit-scrollbar":[x.l0.display.none,{msOverflowStyle:"none",scrollbarWidth:"none"}]},"@media (max-width: ".concat(eu.j.tabletMax,"px)"),{scrollSnapType:"x mandatory",scrollPadding:"0 24px"})],children:[c.hz.slice(0,3).map(function(e,n){return(0,o.tZ)(ey.TileComponent,{isDeployment:e.isDeployment,backgroundImage:e.backgroundImage,title:e.title,profilePicture:e.profilePicture,username:e.username,link:e.link,inPostsFeedPage:!0},n)}),(0,o.BX)(P.G,{css:ex.cardLinkContainer,children:[(0,o.tZ)(em(),{legacyBehavior:!0,href:"/community-hub",passHref:!0,children:(0,o.BX)("a",{css:ex.cardLink,children:[(0,o.tZ)(ed.Z,{size:24}),(0,o.tZ)(G.xv,{multiline:!1,children:"Explore the Community Hub"})]})}),(0,o.tZ)(em(),{legacyBehavior:!0,href:"https://replit.typeform.com/to/VxbQhsr1",passHref:!0,children:(0,o.BX)("a",{css:ex.cardLink,target:"_blank",children:[(0,o.tZ)(eh.Z,{size:24}),(0,o.tZ)(G.xv,{multiline:!1,children:"Submit a Deployment"})]})})]})]}),(0,o.BX)(P.G,{css:ex.buttonLinkContainer,children:[(0,o.tZ)(b.Z,{variant:"outlined",text:"Community Hub",iconLeft:(0,o.tZ)(ed.Z,{}),href:"/community-hub",css:ex.buttonLink}),(0,o.tZ)(b.Z,{variant:"outlined",text:"Submit Deployment",iconLeft:(0,o.tZ)(eh.Z,{}),href:"https://replit.typeform.com/to/VxbQhsr1",css:ex.buttonLink,target:"_blank"})]})]}),(0,o.BX)(P.G,{css:(Y={},(0,r._)(Y,q.A.mobile,[x.l0.colWithGap(32)]),(0,r._)(Y,q.A.desktop,[x.l0.rowWithGap(32)]),Y),children:[(0,o.BX)(P.G,{css:(0,r._)({},q.A.desktop,[x.l0.width("30%")]),children:[(0,o.tZ)(P.G,{css:(0,r._)({},q.A.desktop,[x.l0.display.none]),children:eD}),(0,o.tZ)(P.G,{css:[(K={},(0,r._)(K,q.A.mobile,[x.l0.colWithGap(16)]),(0,r._)(K,q.A.desktop,[x.l0.colWithGap(32)]),K),eW.value&&(0,r._)({},q.A.mobile,x.l0.display.none),(null==eX?void 0:eX.length)&&(0,r._)({},q.A.mobile,x.l0.display.none)],children:eU?(0,o.tZ)(M.JL,{tagGroups:eU,params:ei}):null})]}),(0,o.BX)(P.G,{css:[x.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(P.G,{css:(0,r._)({},q.A.mobile,[x.l0.display.none]),children:eD}),(0,o.tZ)(P.G,{css:[x.l0.colWithGap(16)],children:eW.value?(0,o.tZ)(I,{tags:eW.result.tags,posts:eW.result.posts,search:eW.value,loading:eW.loading,currentTags:eX,currentUser:(null==eZ?void 0:eZ.currentUser)||(null==e_?void 0:e_.currentUser)}):(0,o.tZ)(F,{searchQuery:ei.searchQuery,tags:ei.tags,order:ei.order,after:ei.after,count:ei.count})})]})]}),(0,o.tZ)(ea.u,{onRequestClose:function(){(!eB||window.confirm("Are you sure you want to leave? Unsaved changes may be lost."))&&eT()},isOpen:"publish"===eC,noPadding:!0,maxWidth:872,fitContent:!0,css:ex.publishModal,children:(0,o.tZ)(g.Z,{source:"postsFeed"})}),(0,o.tZ)(h.Z,{isOpen:"create"===eC,onRequestClose:eT,children:(0,o.tZ)(p.Z,{})}),(0,o.tZ)(u.ZP,{onSuccess:(0,l._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,ec.resetStore()];case 1:return e.sent(),eP?eR("publish"):eR("create"),[2]}})}),tracking:eN})]})})}}},function(e){e.O(0,[1604,7854,2536,7372,2613,1694,7375,1492,668,1620,3259,7762,9122,1950,6559,6641,4846,5031,920,4854,5080,5582,9774,2888,179],function(){return e(e.s=36335)}),_N_E=e.O()}]);
//# sourceMappingURL=postsFeed-cd890908cc67608f.js.map