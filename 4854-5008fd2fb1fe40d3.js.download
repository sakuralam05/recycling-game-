!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4b960510-739f-4528-8814-010fd63f50a3",e._sentryDebugIdIdentifier="sentry-dbid-4b960510-739f-4528-8814-010fd63f50a3")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"ec45b404"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4854],{3212:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t){var n=t.existing,r=t.getKey,i=new Map,l=!0,a=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(l=(s=u.next()).done);l=!0){var c=s.value;i.set(r(c),c)}}catch(e){a=!0,o=e}finally{try{l||null==u.return||u.return()}finally{if(a)throw o}}var d=new Set,p=[],h=!0,f=!1,v=void 0;try{for(var g,m=n[Symbol.iterator]();!(h=(g=m.next()).done);h=!0){var b=g.value,y=r(b),w=i.get(y);w&&(p.push(w),d.add(y))}}catch(e){f=!0,v=e}finally{try{h||null==m.return||m.return()}finally{if(f)throw v}}var Z=!0,_=!1,x=void 0;try{for(var R,C=e[Symbol.iterator]();!(Z=(R=C.next()).done);Z=!0){var S=R.value;d.has(r(S))||p.push(S)}}catch(e){_=!0,x=e}finally{try{Z||null==C.return||C.return()}finally{if(_)throw x}}return p}},54854:function(e,t,n){n.d(t,{Z:function(){return tQ}});var r,i,l=n(42516),a=n(74985),o=n(82230),s=n(94778),u=n(60772),c=n(29318),d=n(72093),p=n(60100),h=n(27387),f=n(41733),v=n(30509),g=n(66626),m=n(96583),b=n(85733),y=n(60305),w=n(12285),Z=n(4955),_=n(14105),x=n(9670),R=n(29609),C=n(92031),S=n(3341),T=n.n(S),I=n(85438),P=n(50959),V=n(47048),k=n(21262),U=n(71440),E=n(99165);function G(){var e=(0,k._)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return G=function(){return e},e}var F={},D=(0,U.Ps)(G(),p.FW);function B(e){var t,n,r,i,l,a,o;return e.error?e.error.message||"Something went wrong publishing your Repl":(null===(n=e.data)||void 0===n?void 0:null===(t=n.createReplPost2)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.createReplPost2)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(l=a.createReplPost2)||void 0===l?void 0:l.__typename)==="UserError"?e.data.createReplPost2.message:(null===(o=e.data)||void 0===o?void 0:o.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}var W=n(58995);function X(){var e=(0,k._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return X=function(){return e},e}var N={},L=(0,U.Ps)(X(),p.FW);function z(){var e=(0,k._)(["\n  mutation UseSetReplTagsSetTags($input: SetReplTagsInput!) {\n    setReplTags(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return z=function(){return e},e}var j={},M=(0,U.Ps)(z(),p.FW);function A(e){var t,n,r,i,l,a,o;return e.error?e.error.message||"Something went wrong saving your Repl Tags":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplTags)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplTags)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(l=a.setReplTags)||void 0===l?void 0:l.__typename)==="UserError"?e.data.setReplTags.message:(null===(o=e.data)||void 0===o?void 0:o.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}function O(){var e=(0,k._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return O=function(){return e},e}var K={},$=(0,U.Ps)(O(),p.FW);function J(e){var t,n,r,i,l,a,o;return e.error?e.error.message||"Something went wrong saving your Cover page":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplViewSettings)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplViewSettings)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(l=a.setReplViewSettings)||void 0===l?void 0:l.__typename)==="UserError"?e.data.setReplViewSettings.message:(null===(o=e.data)||void 0===o?void 0:o.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function H(){var e=(0,k._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return H=function(){return e},e}var Y={},q=(0,U.Ps)(H(),p.FW);function Q(e){return e.message||"Something went wrong saving updates to your Repl"}function ee(e){return"repl_file"===e||"repl_image"===e}(r=i||(i={})).ReplFile="repl_file",r.ReplImage="repl_image";var et=function(e){"use strict";(0,Z._)(n,e);var t=(0,x._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error)),en=function(e){"use strict";(0,Z._)(n,e);var t=(0,x._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error)),er=function(e){"use strict";(0,Z._)(n,e);var t=(0,x._)(n);function n(){return(0,w._)(this,n),t.apply(this,arguments)}return n}((0,_._)(Error));function ei(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function el(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this Repl do?"}}var ea=(0,P.createContext)(null),eo=function(e){var t=(0,P.useContext)(ea);if(!t)throw Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},es=function(){var e=(0,P.useContext)(ea);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},eu=n(15235),ec=n(99236),ed=n(64479),ep=n(64432),eh=n(2511),ef=n(1383),ev=n(8147),eg=n(87128),em=n(98674),eb=n(38414),ey=n(57253),ew=n(19068),eZ=n(59947),e_=s.K.button,ex=function(){return(0,a.tZ)(s.G,{css:[d.l0.flex.row,d.l0.flex.grow(1),{borderTop:"1px solid ".concat(d.TV.outlineDimmest)}]})},eR=function(e){var t=e.isActive,n=e.isComplete,r=e.children,i=e.onClick,l=e.disabled;return(0,a.BX)(e_,{type:"button",css:[d.l0.reset.button,d.l0.position.relative,ew.gU.nofill,t&&d.l0.backgroundColor.backgroundHigher,d.l0.p(4),d.l0.borderRadius(4)],onClick:i,disabled:l,children:[(0,a.tZ)(o.xv,{variant:"small",multiline:!1,children:r}),n?(0,a.tZ)(eZ.Z,{size:6,strokeWidth:6,color:d.TV.foregroundDimmer,css:[d.l0.position.absolute,{top:2,right:-2}]}):null]})},eC=n(80854),eS=n(28800);function eT(e){var t=e.error,n=e.dataCy;return t?(0,a.BX)(s.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:[(0,a.tZ)(eg.Z,{css:[d.l0.color.accentNegativeStronger]}),(0,a.tZ)(o.xv,{css:[d.l0.flex.growAndShrink(1),d.l0.color.accentNegativeStronger],dataCy:n,children:t.message})]}):null}var eI=n(1354),eP=n(91945),eV=n(17642),ek=n(14872),eU=n(3212),eE=n(10495),eG=n(72333),eF=n(18060),eD=n(90493);function eB(){var e=(0,k._)(["\n  fragment PublishableReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n  }\n"]);return eB=function(){return e},e}function eW(){var e=(0,k._)(["\n  query PublishableReplSelector($search: String!) {\n    currentUser {\n      id\n      publishableReplSearch(search: $search) {\n        id\n        ...PublishableReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return eW=function(){return e},e}var eX={},eN=(0,U.Ps)(eB()),eL=(0,U.Ps)(eW(),eN),ez=s.K.div,ej=s.K.li,eM={searchValue:"",loading:!1,repls:[]};function eA(e,t){switch(t.type){case"data":var n,r=(null===(n=t.data.currentUser)||void 0===n?void 0:n.publishableReplSearch)||[];return(0,v._)((0,f._)({},e),{loading:!1,repls:(0,eU.Z)(r,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return(0,v._)((0,f._)({},e),{loading:!0});case"searchValue":return(0,v._)((0,f._)({},e),{searchValue:t.searchValue})}}function eO(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function eK(e){var t,n=(0,P.useRef)(null);(0,eI.rf)(function(){var t;e.selectedRepl&&(null===(t=n.current)||void 0===t||t.blur())},[e.selectedRepl]);var r=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&eO(e.selectedRepl)===e.inputValue?(0,a.tZ)(s.G,{css:[d.l0.px(8),d.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,a.tZ)(eG.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,a.BX)(s.G,{css:[{position:"relative"}],children:[(0,a.BX)(ez,(0,v._)((0,f._)({},e.getComboboxProps()),{css:{position:"relative"},children:[r,(0,a.tZ)(eF.II,(0,f._)({css:[d.l0.pr(32),r&&d.l0.pl(32)]},e.getInputProps({placeholder:"Search for a Repl",onFocus:e.onFocus,ref:n}))),(0,a.tZ)(s.G,{css:[d.l0.center,d.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,a.tZ)(c.Z,{}):(0,a.tZ)(eD.Z,{})})]})),(0,a.tZ)(ez,(0,v._)((0,f._)({},e.getMenuProps()),{css:{position:"relative"},children:e.isOpen?(0,a.BX)(eP.Z,{children:[e.loading&&0===e.repls.length?(0,a.tZ)(ej,{css:[d.l0.center,d.l0.py(32)],children:(0,a.tZ)(c.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,a.tZ)(ej,{css:[d.l0.center,d.l0.py(32)],children:(0,a.tZ)(o.xv,{color:"dimmer",variant:"small",multiline:!1,children:"No Repls found"})}),e.repls.map(function(t,n){return(0,a.tZ)(ej,(0,v._)((0,f._)({},e.getItemProps({item:t,index:n})),{children:(0,a.tZ)(eV.Z,{taller:!0,filter:"",title:eO(t),subtitle:(0,eE.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===n,icon:t.iconUrl?(0,a.tZ)(eG.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)})]}):null}))]})}var e$=n(72370),eJ=n(21371),eH=s.K.label,eY=(0,P.forwardRef)(function(e,t){return(0,a.tZ)(eH,(0,v._)((0,f._)({},e),{ref:t,css:d.l0.color.foregroundDimmer}))}),eq=function(){var e,t,n,r,i,l,o,u=(0,e$.U)()("repl"),c=eo("replId"),p=eo("iconUrl"),h=(t=(e=(0,g._)((0,P.useReducer)(eA,eM),2))[0],n=e[1],l=(r={variables:{search:(0,ek.Z)(t.searchValue,200)},notifyOnNetworkStatusChange:!0,onCompleted:function(e){n({type:"data",data:e})}},i=(0,f._)({},eX,r),W.a(eL,i)).loading,(0,P.useEffect)(function(){l&&n({type:"loading"})},[l]),o=(0,P.useCallback)(function(e){return n({type:"searchValue",searchValue:e||""})},[]),{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:o}),m=(0,eJ.Kb)({id:u,items:h.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;h.setSearchValue(t)},onSelectedItemChange:function(e){(null==e?void 0:e.selectedItem)&&(c.setValue(e.selectedItem.id),m.closeMenu())},itemToString:eO});return(0,a.BX)(s.G,{css:[d.l0.colWithGap(4)],children:[(0,a.tZ)(eY,{css:d.l0.color.foregroundDimmer,htmlFor:u,children:"Repl"}),(0,a.tZ)(eK,{getComboboxProps:m.getComboboxProps,getInputProps:m.getInputProps,getItemProps:m.getItemProps,getMenuProps:m.getMenuProps,isOpen:m.isOpen,highlightedIndex:m.highlightedIndex,inputValue:m.inputValue,selectedRepl:m.selectedItem?(0,v._)((0,f._)({},m.selectedItem),{iconUrl:p.value||m.selectedItem.iconUrl}):void 0,repls:h.repls,loading:h.loading,onFocus:function(e){m.selectedItem&&(e.preventDefault(),e.currentTarget.select(),h.setSearchValue("")),m.openMenu()}})]})},eQ=function(){var e=(0,e$.U)(),t=e("replName"),n=e("replDescription"),r=es(),i=r.replIdField,l=r.replTitleField,u=r.replDescriptionField,c=r.isSaving;return(0,a.BX)(s.G,{css:[d.l0.colWithGap(16),d.l0.flex.growAndShrink(1)],children:[!i.value||i.touched?(0,a.tZ)(eq,{}):null,(0,a.BX)(s.G,{css:[d.l0.colWithGap(4)],children:[(0,a.tZ)(s.G,{css:[d.l0.flex.row,d.l0.align.baseline,d.l0.justify.spaceBetween],children:(0,a.tZ)(eY,{css:[d.l0.color.foregroundDimmer,{lineHeight:d.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"})}),l.value]}),(0,a.BX)(s.G,{css:[d.l0.colWithGap(4)],children:[(0,a.BX)(s.G,{css:[d.l0.flex.row,d.l0.align.baseline,d.l0.justify.spaceBetween],children:[(0,a.tZ)(eY,{css:[d.l0.color.foregroundDimmer,{lineHeight:d.TV.lineHeightSmall}],htmlFor:n,children:"Repl description"}),(0,a.BX)(o.xv,{multiline:!1,css:{color:u.value.length>1e3?d.TV.accentNegativeStronger:d.TV.foregroundDimmest},children:[u.value.length,"/",1e3]})]}),(0,a.tZ)(eF.B,{id:n,value:u.value,disabled:!i.value||c,onChange:function(e){u.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[d.l0.minHeight(128),d.l0.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),u.touched?(0,a.tZ)(eT,{error:u.error,dataCy:"publish-form-repl-description-error"}):null]})]})},e0=function(e){var t=e.showPlayButton,n=e.children,r=e.active;return(0,a.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,a.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?d.TV.accentPrimaryDimmest:void 0},children:n}),(0,a.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,a.tZ)("rect",{width:"268",height:"17",fill:d.TV.backgroundDefault}),(0,a.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:d.TV.accentPositiveDimmer}),(0,a.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:d.TV.backgroundHighest}),(0,a.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:d.TV.backgroundHighest}),(0,a.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?d.TV.accentPrimaryDefault:d.TV.outlineDimmer}),t?(0,a.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:d.TV.white}):null,(0,a.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?d.TV.accentPrimaryDefault:d.TV.outlineDimmer,strokeWidth:"1"})]})]})},e1=n(43312),e2=n(39667),e4=n(36559),e3=s.K.ol,e8=s.K.li,e5=(0,e1.iv)([d.l0.py(4),d.l0.borderRadius(8),{border:"1px solid ".concat(d.TV.outlineDimmest),borderRadius:d.TV.borderRadius8,backgroundColor:ew.vb.interactiveBackground,zIndex:d.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:d.TV.space8,listStyle:"none"}]),e6={backgroundColor:ew.vb.interactiveBackgroundActive},e7={backgroundColor:d.TV.accentPrimaryDimmer},e9=(0,e1.iv)([d.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,f._)({},e6),":active":(0,f._)({},e7)}}]);function te(e){var t,n,r,i,l,u,c,p,y,w,Z,_,x,R,C,S,T=e.fs,I=e.initiallySelectedFile,V=e.onFileSelect,k=e.onClear,U=(0,P.useRef)(null),E=(n=(t=(0,g._)((0,P.useState)({isLoading:!0,error:null,files:[]}),2))[0],r=t[1],(0,P.useEffect)(function(){function e(){return(e=(0,h._)(function(){var e,t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,T.listFiles()];case 1:if((e=n.sent()).error)throw Error(e.error);return r({isLoading:!1,error:null,files:(null!==(t=e.files)&&void 0!==t?t:[]).slice().sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{file:e,pathDepth:(0,e4.U$)(e)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return n.sent(),r({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[T]),(0,f._)({},n)),G=E.isLoading,F=E.files,D=E.error,B=(l=(i={files:F,inputRef:U,initiallySelectedFile:I}).files,u=i.inputRef,c=i.initiallySelectedFile,y=(p=(0,g._)((0,P.useState)(!1),2))[0],w=p[1],_=(Z=(0,g._)((0,P.useState)(l),2))[0],x=Z[1],R=(0,P.useCallback)(function(e){return l.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())})},[l]),C=(0,eJ.Kb)({items:_,isOpen:y,initialInputValue:c,initialSelectedItem:_.find(function(e){return e===c}),onIsOpenChange:function(e){w(!!e.isOpen)},onInputValueChange:function(e){var t;x(R(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),S=(0,P.useCallback)(function(){var e;w(!1),null===(e=u.current)||void 0===e||e.blur()},[u]),(0,P.useEffect)(function(){var e;x(R(null!==(e=C.inputValue)&&void 0!==e?e:""))},[l,R,C.inputValue]),(0,P.useEffect)(function(){C.selectedItem&&S()},[C.selectedItem,S]),(0,v._)((0,f._)({},C),{closeMenu:S,items:_})),W=(0,b.Z)(V);return(0,P.useEffect)(function(){B.selectedItem&&W.current(B.selectedItem)},[B.selectedItem,W]),(0,a.BX)(s.G,{children:[(0,a.tZ)(s.G,(0,v._)((0,f._)({},B.getComboboxProps({refKey:"innerRef"})),{css:[d.l0.position.relative],children:(0,a.tZ)(e2.E,(0,v._)((0,f._)({},B.getInputProps({onFocus:B.openMenu,ref:U,refKey:"inputRef",disabled:G,placeholder:"Search your files"})),{onClear:function(){var e;B.reset(),null===(e=U.current)||void 0===e||e.focus(),k()},loading:G}))})),(0,a.BX)(s.G,(0,v._)((0,f._)({},B.getMenuProps({refKey:"innerRef"})),{css:[d.l0.position.relative],children:[D?(0,a.tZ)(s.G,{css:[d.l0.p(8)],children:(0,a.tZ)(o.xv,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!D&&B.isOpen?(0,a.tZ)(e3,{css:[e5],children:B.items.length>0?B.items.map(function(e,t){return(0,a.tZ)(e8,(0,v._)((0,f._)({css:[e9,B.highlightedIndex===t&&e6,e===B.selectedItem&&e7]},B.getItemProps({item:e,index:t,onClick:function(){B.closeMenu()}})),{children:(0,a.tZ)(o.xv,{multiline:!1,children:e})}),e)}):(0,a.tZ)(e8,{css:[d.l0.p(8)],children:(0,a.BX)(o.xv,{multiline:!1,children:['No files found for "',B.inputValue,'"']})})}):null]}))]})}var tt=n(73064),tn=function(e){var t=(0,P.useRef)(null);return{inputProps:{onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var l=i?i[0]:null;l&&e(l)}},"aria-hidden":"true",ref:t,accept:tt.W9.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.click()}},inputRef:t}},tr=function(e){var t=tn(e.onFile),n=t.inputProps,r=t.buttonProps;return(0,a.BX)(a.HY,{children:[(0,a.tZ)("input",(0,v._)((0,f._)({},n),{css:{display:"none"}})),e.children(r)]})};n(83003);var ti=n(12933);n(71730),n(85763),n(45271);var tl=n(36084);n(80888),n(55821),n(76171);var ta=n(98308);n(30177);var to=(0,e1.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function ts(e){var t=e.src,n=e.alt;return(0,a.BX)(s.G,{css:[to,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,a.tZ)(ti.Z,{objectFit:"cover",layout:"fill",src:t,alt:n}),(0,a.tZ)(s.G,{css:[to,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var tu=n(54579),tc=[{value:i.ReplImage,text:"Photo"},{value:i.ReplFile,text:"File"}],td=function(e){var t,n,r,l,u,p,b=e.fs,y=(0,e$.U)(),w=y("coverPage"),Z=es(),_=Z.selectedRepl,x=Z.coverFileField,R=Z.coverUrlField,S=Z.coverDefaultViewField,T=(0,g._)((t=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!(null==e?void 0:e.length)||!(t=e[0]).type.startsWith("image/"))return[2];return[4,k.uploadImage(t,ta.N.ReplCoverImage)];case 1:return n.sent(),[2]}})}),n=function(e){return t.apply(this,arguments)},l=(r=(0,g._)((0,P.useState)(!1),2))[0],u=r[1],p=(0,P.useRef)(0),[l,(0,P.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),p.current++,u(!0)},onDragLeave:function(e){e.preventDefault(),p.current--,0===p.current&&u(!1)},onDrop:function(e){e.preventDefault(),p.current=0,u(!1),e.persist();var t,r,i=Array.from(null!==(r=null==e?void 0:null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&void 0!==r?r:[]);if(0===i.length){n(null);return}n(i)},onDragOver:function(e){e.preventDefault()}}},[n])]),2),I=T[0],V=T[1],k=(0,C.W)(R.setValue);return(0,a.BX)(s.G,(0,v._)((0,f._)({css:[d.l0.colWithGap(16)]},V),{children:[(0,a.BX)(s.G,{css:d.l0.colWithGap(12),children:[(0,a.tZ)(s.G,{css:[d.l0.rowWithGap(8)],children:(0,a.tZ)(tu.E,{tag:"fieldset",css:[d.l0.rowWithGap(24)],name:w,value:S.value,onChange:function(e){ee(e.target.value)&&S.setValue(e.target.value)},children:tc.map(function(e){return(0,a.BX)(s.G,{css:[d.l0.rowWithGap(8)],children:[(0,a.tZ)(tu.Y,{id:y(e.value),value:e.value}),(0,a.tZ)("label",{htmlFor:y(e.value),children:e.text})]},e.value)})})}),S.value===i.ReplImage&&(0,a.BX)(s.G,{css:[d.l0.colWithGap(4),d.l0.align.center],children:[(0,a.tZ)(tr,{onFile:function(e){return k.uploadImage(e,ta.N.ReplCoverImage)},children:function(e){var t=e.onClick;return(0,a.tZ)(eu.zx,{onClick:t,colorway:I?"primary":void 0,text:"Upload a cover photo",iconLeft:k.isLoading?(0,a.tZ)(c.Z,{}):(0,a.tZ)(tl.Z,{}),stretch:!0})}}),k.error?(0,a.tZ)(ec.E,{colorway:"negative",icon:(0,a.tZ)(eg.Z,{}),text:k.error}):null,(0,a.tZ)(o.xv,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),S.value===i.ReplFile&&(0,a.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,a.tZ)(te,{fs:b,initiallySelectedFile:x.value,onFileSelect:x.setValue,onClear:function(){return x.setValue("")}},null==_?void 0:_.id),(0,a.tZ)(eT,{error:x.error})]})]}),S.value===i.ReplImage&&(0,a.BX)(e0,{active:I,showPlayButton:S.value===i.ReplImage&&!!R.value&&!k.isLoading,children:[S.value===i.ReplImage&&R.value?(0,a.tZ)(ts,{src:R.value,alt:"cover"}):null,k.isLoading?(0,a.tZ)(s.G,{css:[{position:"absolute",inset:0},d.l0.align.center,d.l0.justify.center],children:(0,a.tZ)(c.Z,{color:d.TV.white,size:24})}):null]})]}))},tp=(n(64318),function(){eo("iconUrl");var e=es(),t=e.replIconInput,n=e.replIconUrl;return(0,a.BX)(s.G,{css:[d.l0.colWithGap(16),d.l0.align.center],children:[(0,a.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,a.BX)(s.G,{css:[d.l0.rowWithGap(8)],children:[(0,a.tZ)(tr,{onFile:function(e){return t.uploadImage(e,ta.N.ReplIcon)},css:d.l0.backgroundColor.accentNegativeDefault,children:function(e){var t=e.onClick;return(0,a.tZ)(eu.zx,{onClick:t,text:"Upload image",iconLeft:(0,a.tZ)(tl.Z,{}),css:[d.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),t.error?(0,a.tZ)(s.G,{children:(0,a.tZ)(ec.E,{icon:(0,a.tZ)(eg.Z,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,a.tZ)(eG.LN,{alt:"icon",size:84,iconUrl:n,isLoading:!!t.previewUrl,css:[d.l0.backgroundColor.backgroundHigher]})]})}),th=n(85638),tf=n(71089),tv=n(59249),tg=function(){var e=eo("isTemplate"),t=(0,e$.U)()("templateCheckbox");return(0,a.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,a.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,a.BX)(s.G,{css:[d.l0.rowWithGap(8)],children:[(0,a.tZ)(tf.X,{id:t,checked:e.value,onChange:function(t){return e.setValue(t)}}),(0,a.tZ)("label",{htmlFor:t,children:"Publish as Template"})]}),(0,a.tZ)(eT,{error:e.error})]}),(0,a.tZ)(o.xv,{variant:"small",color:"dimmer",children:"This is a good option for Repls meant as starting points for future work."}),(0,a.tZ)(s.G,{css:[d.l0.align.start],children:(0,a.tZ)(th.Z,{href:"https://docs.replit.com/programming-ide/how-to-make-a-replit-template",target:"_blank",text:"What makes a good Template?",iconRight:(0,a.tZ)(tv.Z,{}),variant:"outlined",size:"small"})}),(0,a.tZ)(s.G,{css:[d.l0.pt(16)],children:(0,a.BX)(o.xv,{children:["Please make sure your Repl abides by the"," ",(0,a.tZ)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})]})},tm=n(63257),tb=n(42074),ty=n(21063),tw=s.K.ul,tZ=s.K.li;function t_(e){var t=e.children;return(0,a.tZ)(s.G,{css:[d.l0.px(8),d.l0.pt(8)],children:(0,a.tZ)(o.xv,{multiline:!1,css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function tx(e){var t=e.highlighted,n=e.tag;return(0,a.tZ)(s.G,{css:[d.l0.rowWithGap(8),d.l0.p(8),t&&{backgroundColor:ew.gU.listItem["@media (hover: hover)"][":not([disabled])"][":not(textarea):active"].backgroundColor},{cursor:"pointer"}],children:(0,a.BX)(s.G,{css:[d.l0.flex.growAndShrink(1),d.l0.rowWithGap(4),d.l0.align.center],children:[(0,a.tZ)(o.xv,{multiline:!1,children:n.id}),n.isOfficial?(0,a.tZ)(ty.Z,{}):null]})})}var tR=P.memo(function(e){var t=e.getItemProps,n=e.highlightedIndex,r=e.data;return(0,a.tZ)(eP.Z,{css:[d.l0.minWidth(200)],children:r.sections.reduce(function(e,r){return e.sections.push((0,a.BX)(tZ,{children:[(0,a.tZ)(t_,{children:r.title}),(0,a.tZ)(tw,{css:[d.l0.pt(4),d.l0.pb(8)],children:r.tags.map(function(r){var i=e.itemIndex++;return(0,a.tZ)(tZ,(0,v._)((0,f._)({},t({item:r,index:i})),{children:(0,a.tZ)(tx,{tag:r,highlighted:n===i})}),r.id)})})]},r.title)),e},{sections:[],itemIndex:0}).sections})});tR.displayName="TagsMenu";var tC=n(16691);function tS(){var e=(0,k._)(["\n  fragment TagsComboboxTag on Tag {\n    id\n    isOfficial\n  }\n"]);return tS=function(){return e},e}function tT(){var e=(0,k._)(["\n  query TagsCombobox($limit: Int, $search: String) {\n    tagGroups {\n      official(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n      community(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n    }\n  }\n  ","\n"]);return tT=function(){return e},e}var tI={},tP=(0,U.Ps)(tS()),tV=(0,U.Ps)(tT(),tP),tk=/^[0-9a-zA-Z]+$/,tU=function(e){return e.id},tE=n(29252),tG=s.K.div,tF=s.K.input,tD=(0,e1.iv)([d.l0.fontSize(12),d.l0.pl(24),d.l0.pr(8),d.l0.py(4)]);function tB(){return(0,a.tZ)(o.xv,{multiline:!1,css:[d.l0.px(4),d.l0.flex.row,d.l0.align.center,d.l0.position.absolute,d.l0.height("100%"),d.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,a.tZ)(tE.Z,{size:12})})}function tW(e){var t=e.text,n=e.children;return(0,a.BX)(ed.Tg,{elevated:!0,css:[d.l0.position.relative,d.l0.minWidth(30),d.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:d.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,a.tZ)(tB,{}),(0,a.tZ)(o.xv,{css:[{visibility:"hidden"},tD],multiline:!1,children:t}),n]})}function tX(e){var t,n,r,i,l,o,u,c,p,h,m,y,w,Z,_,x,R,C,S,T,I=(t=e.onRemove,n=e.onSelect,r=e.filter,i=e.inputValue,l=e.setInputValue,o=(0,ek.Z)(i,100),u=(0,b.Z)(n),C=(p=(c={search:o,filter:void 0===r?function(){return!0}:r}).search,h=c.filter,y=(m=(0,f._)({},tI,{variables:{limit:p?10:3,search:p}}),W.a(tV,m)).data,Z=(w=(0,g._)((0,P.useState)({official:[],community:[],newTag:[]}),2))[0],_=w[1],x=(0,P.useMemo)(function(){if(y){var e=[],t=[],n=new Set,r=!0,i=!1,l=void 0;try{for(var a,o=y.tagGroups.official[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var s=a.value;n.add(s.id.toLowerCase()),h(s)&&e.push(s)}}catch(e){i=!0,l=e}finally{try{r||null==o.return||o.return()}finally{if(i)throw l}}var u=!0,c=!1,d=void 0;try{for(var f,v=y.tagGroups.community[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var g=f.value;n.add(g.id.toLowerCase()),h(g)&&t.push(g)}}catch(e){c=!0,d=e}finally{try{u||null==v.return||v.return()}finally{if(c)throw d}}var m=t.find(function(e){return e.id===p}),b=!p||m||n.has(p.toLowerCase())?void 0:{id:p,isOfficial:!1};return{official:e,community:t,newTag:b&&h(b)?[b]:[]}}},[y,h,p]),(0,P.useEffect)(function(){if(x){var e=x.official,t=x.community,n=x.newTag;_(function(r){return{official:(0,eU.Z)(e,{existing:r.official,getKey:tU}),community:(0,eU.Z)(t,{existing:r.community,getKey:tU}),newTag:n}})}},[x]),R={tagGroups:Z,reset:function(){_({official:[],community:[],newTag:[]})}}).tagGroups,S=R.reset,T=(0,eJ.Kb)({inputValue:i,items:(0,tm._)(C.official).concat((0,tm._)(C.community),(0,tm._)(C.newTag)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(S(),l(""),T.reset(),T.openMenu())}}),(0,tC.Z)(function(){T.selectedItem&&u.current(T.selectedItem)},[T.selectedItem]),{tagGroups:C,combobox:T,onChange:function(e){var t=e.currentTarget.value;(!t||tk.test(t))&&!(t.length>30)&&l(t)},onKeyDown:function(e){""===i&&"Backspace"===e.key&&(e.preventDefault(),t())}}),V=I.combobox,k=I.tagGroups,U=I.onChange,E=I.onKeyDown,G=(0,P.useMemo)(function(){var e;return e=[],(k.official.length&&e.push({title:"Official Tags",tags:k.official}),k.community.length&&e.push({title:"Community Tags",tags:k.community}),k.newTag.length&&e.push({title:"Create new tag",tags:k.newTag}),0===e.length)?null:{type:"sections",sections:e}},[k]),F="Add tag";return(0,a.BX)(s.G,{children:[(0,a.tZ)(tG,(0,v._)((0,f._)({},V.getComboboxProps()),{css:[d.l0.flex.row],children:(0,a.tZ)(tW,{text:V.inputValue||F,children:(0,a.tZ)(tF,(0,f._)({css:[d.l0.coverContainer,tD,d.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":d.l0.color.foregroundDefault,"&:focus::placeholder":d.l0.color.foregroundDimmest}]},V.getInputProps({placeholder:F,onChange:U,onKeyDown:E,onFocus:function(){V.openMenu()}})))})})),(0,a.tZ)(tG,(0,v._)((0,f._)({},V.getMenuProps()),{css:[d.l0.position.relative],children:G&&V.isOpen?(0,a.tZ)(tR,{getItemProps:V.getItemProps,highlightedIndex:V.highlightedIndex,data:G}):null}))]})}function tN(e){var t=e.tags,n=e.max,r=e.onAdd,i=e.onRemove,l=t.map(function(e){return e.id}),o=(0,g._)((0,P.useState)(""),2),u=o[0],c=o[1];return(0,a.BX)(s.G,{css:[d.l0.flex.row,d.l0.flex.wrap,{margin:"calc(-1 * ".concat(d.TV.space4,")")}],children:[t.map(function(e,t){return(0,a.tZ)(s.G,{css:[d.l0.m(4)],children:(0,a.tZ)(tb.g,{small:!0,tag:e,onClick:function(){return i(t)}})},e.id)}),t.length<(void 0===n?5:n)?(0,a.tZ)(s.G,{css:[d.l0.m(4)],children:(0,a.tZ)(tX,{onSelect:r,filter:function(e){return!l.includes(e.id.toLowerCase())},inputValue:u,setInputValue:c,onRemove:function(){var e=t.length-1;e>=0&&(c(t[e].id),i(e))}})}):null]})}var tL=function(){var e=eo("tags");return(0,a.BX)(s.G,{css:[d.l0.colWithGap(8)],children:[(0,a.tZ)(s.G,{css:[d.l0.colWithGap(4)],children:(0,a.tZ)(tN,{max:5,tags:e.value,onAdd:function(t){return e.setValue((0,tm._)(e.value).concat([t]))},onRemove:function(t){return e.setValue((0,tm._)(e.value.slice(0,t)).concat((0,tm._)(e.value.slice(t+1))))}})}),(0,a.BX)(s.G,{css:d.l0.rowWithGap(4),children:[(0,a.tZ)(o.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Adding tags helps others find your Repl."}),(0,a.BX)(o.xv,{color:"dimmest",variant:"small",multiline:!1,children:[e.value.length,"/",5]})]})]})},tz=n(2993),tj=n(45098),tM=n(19393),tA=n(39126),tO=n(46180),tK=n(1813),t$=n(36632),tJ=s.K.form,tH=function(e){var t=e.user,n=es(),r=n.selectedRepl,i=n.replTitleField,u=n.replDescriptionField,p=n.replIconUrl,h=n.tagsField,g=n.isTemplateField;return(0,a.BX)(ed.Tg,{background:"root",css:[(0,l._)({},(0,em.et)("tabletMin"),{display:"flex"}),d.l0.flex.growAndShrink(1),d.l0.p(16),d.l0.colWithGap(12),d.l0.align.center,d.l0.display.none],children:[(0,a.tZ)(o.xv,{multiline:!1,variant:"small",color:"dimmer",css:[d.l0.width("100%"),{fontWeight:d.TV.fontWeightMedium}],children:"Preview"}),(0,a.BX)(s.G,{css:[d.l0.width("100%"),d.l0.maxWidth(432),d.l0.position.relative],children:[(0,a.tZ)(s.G,{css:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+d.TV.backgroundRoot+", inset 0 -48px 24px -24px "+d.TV.backgroundRoot}}),(0,a.BX)(s.G,{css:[d.l0.height(416),d.l0.colWithGap(24),d.l0.justify.center,d.l0.overflow("hidden"),d.l0.backgroundColor.backgroundRoot],children:[(0,a.tZ)(eC.O,{}),r&&p?(0,a.tZ)(eC.Z,{post:{user:t,repl:(0,v._)((0,f._)({},r),{title:i.value,iconUrl:p,tags:h.value,description:u.value,isTemplate:g.value})}}):(0,a.tZ)(s.G,{css:[d.l0.flex.grow(1),d.l0.align.center,d.l0.justify.center],children:(0,a.tZ)(c.Z,{})}),(0,a.tZ)(eC.O,{})]})]})]})},tY=["Basics","Tags","Icon","Cover page","Publishing"];function tq(e){var t,n,r,u,p,v,w,Z,_,x,S,k,U,G,X,z,O,H,eo,es,ew,eZ,e_,eC=e.replId,eT=e.currentUser,eI=e.source,eP=function(e){var t,n,r,i,l,a,o,s,u,c,d,p,v,w=(0,R.Y)(e.replId||null,function(e){return e?null:{message:"Select a Repl to share"}}),Z=(t={variables:{id:w.value||""},skip:!w.value},n=(0,f._)({},N,t),W.a(L,n)),_=(null===(s=Z.data)||void 0===s?void 0:s.repl.__typename)==="Repl"?Z.data.repl:null,x=!!(null==_?void 0:_.publishedAs),S=(0,R.Y)("",ei),k=(0,R.Y)("",el),U=(0,R.Y)(null,function(){return null}),G=(0,R.Y)("repl_image",function(){return null}),X=(0,R.Y)(null,function(){return null}),z=(0,R.Y)("",e.fileValidator),O=(0,R.Y)([],function(){return null}),H=(0,b.Z)(_),ea=(0,R.Y)(!1,function(e){var t=H.current;return e&&(null==t?void 0:t.lastPublishedAt)?{message:"This Repl has already been published. Please unpublish before publishing as a Template."}:e||(null==t?void 0:t.publishedAs)!==I.O2.Template?void 0:{message:"This Repl has already been published as a Template. Please unpublish before publishing as a Repl."}}),eo=function(){var e,t=(0,g._)((e=(0,f._)({},K,void 0),E.D($,e)),2),n=t[0],r=t[1];function i(){return(i=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:J(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:J(r),setReplViewSettings:function(e){return i.apply(this,arguments)}}}(),es=function(){var e,t=(0,g._)((e=(0,f._)({},j,void 0),E.D(M,e)),2),n=t[0],r=t[1];function i(){return(i=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:A(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Repl Tags"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:A(r),setReplTags:function(e){return i.apply(this,arguments)}}}(),eu=function(){var e,t=(0,g._)((e=(0,f._)({},Y,void 0),E.D(q,e)),2),n=t[0],r=t[1];function i(){return(i=(0,h._)(function(e){return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(r.loading)return[2,{data:null,error:null}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:t.sent().data,error:null}];case 3:return[2,{data:null,error:Q(t.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:r.error&&Q(r.error),updateRepl:function(e){return i.apply(this,arguments)}}}(),ec=(l=(i=(0,g._)((r=(0,f._)({},F,void 0),E.D(D,r)),2))[0],a=i[1],{publish:(o=(0,h._)(function(e){var t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,a.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,l({variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:B(n)}];case 3:return r.sent(),[2,{data:null,error:"Something went wrong publishing your Repl"}];case 4:return[2]}})}),function(e){return o.apply(this,arguments)}),data:a.data,loading:a.loading,error:B(a)}),ed=(0,V.r)(),ep=(null==_?void 0:null===(u=_.replViewSettings)||void 0===u?void 0:u.defaultView)&&ee(_.replViewSettings.defaultView)?_.replViewSettings.defaultView:"repl_image",eh=(0,b.Z)(S.setValue),ef=(0,b.Z)(k.setValue),ev=(0,b.Z)(O.setValue),eg=(0,b.Z)(U.setValue),em=(0,b.Z)(X.setValue),eb=(0,b.Z)(G.setValue),ey=(0,b.Z)(z.setValue),ew=(0,b.Z)(ea.setValue);(0,P.useEffect)(function(){var e,t,n,r;_&&(ew.current("Template"===_.publishedAs),eb.current(ep),ey.current(null!==(t=null===(e=_.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),eh.current(_.isRenamed?_.title:"",{preventTouch:!0}),ef.current(null!==(n=_.description)&&void 0!==n?n:"",{preventTouch:!0}),ev.current(_.tags),eg.current(_.iconUrl.endsWith(".svg")?null:_.iconUrl),em.current(null!==(r=_.imageUrl)&&void 0!==r?r:null))},[_,em,eg,ev,eh,ef,ep,eb,ey,ew]);var eZ=(0,C.W)(U.setValue),e_=eZ.previewUrl||U.value||(null==_?void 0:_.iconUrl)||(null==_?void 0:_.templateInfo.iconUrl),ex=null!==(v=null===(p=[w,S,k,U,G,X,O,z,ea].filter(function(e){return(e!==z||"repl_file"===G.value)&&e.error}))||void 0===p?void 0:null===(d=p[0])||void 0===d?void 0:null===(c=d.error)||void 0===c?void 0:c.message)&&void 0!==v?v:null;function eR(){return(eR=(0,h._)(function(){var e,t,n,r,i,l,a,o,s,u,c;return(0,m.Jh)(this,function(d){switch(d.label){case 0:if(!_)throw new et("Missing repl");if(t=_.title!==S.value,n=_.description!==k.value,r=_.iconUrl!==U.value,i="repl_image"===G.value&&_.imageUrl!==X.value,l=z.value&&"repl_file"===G.value&&(null===(e=_.replViewSettings)||void 0===e?void 0:e.replFile)!==z.value,a=G.value&&ep!==G.value,o=!T()(_.tags,O.value),!(t||n||r))return[3,2];if(S.error||k.error||U.error)throw new et;return[4,eu.updateRepl({id:_.id,title:t?S.value:void 0,description:n?k.value:void 0,iconUrl:r?U.value:void 0})];case 1:if((s=d.sent()).error)throw new en(s.error);d.label=2;case 2:if(!(a||i||l))return[3,4];if("repl_image"===G.value&&X.error||"repl_file"===G.value&&z.error)throw new et;return[4,eo.setReplViewSettings({replId:_.id,defaultView:"repl_image"===G.value?I.bV.ReplImage:I.bV.ReplFile,replImage:i?X.value:void 0,replFile:l?z.value:void 0})];case 3:if((u=d.sent()).error)throw new en(u.error);d.label=4;case 4:if(!o)return[3,6];if(O.error)throw new et;return[4,es.setReplTags({replId:_.id,tags:O.value.map(function(e){return e.id})})];case 5:if((c=d.sent()).error)throw new en(c.error);d.label=6;case 6:return[2]}})})).apply(this,arguments)}function eC(){return(eC=(0,h._)(function(){var t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:if(!_)throw new et("Missing repl");if(ex)throw new et(null!=ex?ex:"Something went wrong");if(!ea.value)return[3,2];return[4,ed.createDeployment({input:{replId:_.id,description:k.value,iconUrl:e_||_.iconUrl}})];case 1:if((t=r.sent()).error)throw new er(t.error);return(0,y.j)(y.U3.POST_MADE,{source:e.source,replType:"template_repl",title:S.value,description:k.value,tags:O.value.map(function(e){return e.id}),defaultView:G.value}),[2];case 2:return[4,ec.publish({input:{replId:_.id}})];case 3:if((n=r.sent()).error)throw new er(n.error);return(0,y.j)(y.U3.POST_MADE,{source:e.source,replType:"regular_repl",title:S.value,description:k.value,tags:O.value.map(function(e){return e.id}),defaultView:G.value}),[2]}})})).apply(this,arguments)}var eS=eu.loading||eo.loading||es.loading,eT=eu.error||eo.error||es.error,eI=ec.loading||ed.loading,eP=ec.error||ed.error;return{selectedRepl:_,isReplLoading:Z.loading,replLoadingError:Z.error,replIdField:w,replTitleField:S,replDescriptionField:k,iconUrlField:U,coverDefaultViewField:G,coverUrlField:X,coverFileField:z,tagsField:O,isTemplateField:ea,replIconInput:eZ,replIconUrl:e_,inputError:ex,save:function(){return eR.apply(this,arguments)},isSaving:eS,savingError:eT,publish:function(){return eC.apply(this,arguments)},isPublishing:eI,publishingError:eP,isPublished:x}}({replId:eC,fileValidator:(t=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(!eH)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eH.stat(e)];case 2:if(!(t=n.sent()).exists||t.type!==ey.Tv.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return n.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),source:eI}),eV=eP.selectedRepl,ek=eP.isReplLoading,eU=eP.replLoadingError,eE=eP.replIdField,eG=eP.replTitleField,eF=eP.replDescriptionField,eD=eP.iconUrlField,eB=eP.tagsField,eW=eP.coverDefaultViewField,eX=eP.coverUrlField,eN=eP.coverFileField,eL=eP.isTemplateField,ez=eP.save,ej=eP.isSaving,eM=eP.savingError,eA=eP.publish,eO=eP.isPublishing,eK=eP.publishingError,e$=eP.isPublished,eJ=(r=(n={repl:eV,currentUser:eT}).repl,u=n.currentUser,v=(p=(0,g._)((0,tK.qg)(),2))[0],w=p[1],Z=(0,tK.ic)(),x=(_=(0,g._)((0,P.useState)(function(){var e,t,n;return e=(0,tz.ZP)({onUnrecoverableError:(0,tO.Z)({throwBsod:w,origin:"Publish: services/onUnrecoverableError"})}),t=(0,tA.Z)({container:e}),n=(0,t$.Z)({container:e,fs:t}),{container:e,fs:t,dotReplit:n}}),1)[0]).container,S=_.fs,k=_.dotReplit,G=(U=(0,g._)((0,P.useState)(function(){return x.getConnectionState()===tz.em.CONNECTED}),2))[0],X=U[1],z=(0,tj.b)(r?{repl:r,currentUser:u}:null),O=(0,tM.S)(),(0,P.useEffect)(function(){if(r&&z&&x.getConnectionState()===tz.em.DISCONNECTED)return x.connect({context:z,getMinimumRetryDelayMs:O}),function(){return x.close()}},[r,x,z]),(0,P.useEffect)(function(){return x.onConnectionStateChanged(function(e){X(e===tz.em.CONNECTED)})},[x]),{isConnected:G,container:x,fs:S,dotReplit:k,bsodId:null==v?void 0:v.eventId,devClearBsod:function(){return Z()}}),eH=eJ.fs,eY=eJ.dotReplit,eq=eJ.bsodId,e0=(0,g._)((0,P.useState)(0),2),e1=e0[0],e2=e0[1],e4=tY[e1],e3=e1===tY.length-1,e8=(0,g._)((0,P.useState)({show:!1,isUpdate:!1}),2),e5=e8[0],e6=e8[1],e7=(0,g._)((0,P.useState)(function(){return Array(tY.length).fill(!1)}),2),e9=e7[0],te=e7[1],tt=(0,P.useCallback)(function(e,t){e9[e]=t,te(e9)},[e9]);(0,P.useEffect)(function(){eP.replTitleField.value&&eP.replDescriptionField.value?tt(0,!0):tt(0,!1),eP.tagsField.value.length>0?tt(1,!0):tt(1,!1),eP.iconUrlField.value?tt(2,!0):tt(2,!1),eP.coverDefaultViewField.value===i.ReplImage&&eP.coverUrlField.value||eP.coverDefaultViewField.value===i.ReplFile&&eP.coverFileField.value?tt(3,!0):tt(3,!1)},[e9,eP,tt]);var tn=(eo=(H=(0,g._)((0,P.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],es=H[1],(0,P.useEffect)(function(){function e(){return(e=(0,h._)(function(){var e,t,n;return(0,m.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eY.getConfig()];case 1:if((t=r.sent()).error)throw Error(t.errorMessage);return es({isLoading:!1,error:null,entryPoint:null!==(n=null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.entrypoint)&&void 0!==n?n:null}),[3,3];case 2:return r.sent(),es({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[eY]),(0,f._)({},eo));(0,P.useEffect)(function(){tn.isLoading||!tn.entryPoint||eN.value||eN.setValue(tn.entryPoint)},[tn.isLoading,tn.entryPoint,eN]);var tr=(0,g._)((0,P.useState)(!1),2),ti=tr[0],tl=tr[1];(0,P.useEffect)(function(){ti||eC&&(ek||e$)||(tl(!0),(0,y.j)(y.U3.PUBLISH_SELECTED,{source:eI}))},[ti,eI,eC,ek,e$]);var ta=(0,b.Z)(!!((null==eV?void 0:eV.publishedAs)||(null==eV?void 0:eV.lastPublishedAt))),to=(0,b.Z)(e4);if((0,P.useEffect)(function(){return function(){ta.current||(0,y.j)(y.U3.PUBLISH_FLOW_EXITED,{source:eI,lastSectionVisited:to.current})}},[eI,ta,to]),eq)return(0,a.tZ)(eb.Z,{});if(e5.show&&eV)return(0,a.tZ)(eS.q,{repl:eV,isUpdate:e5.isUpdate});var ts={Basics:{hasError:!!(eE.error||eG.error||eF.error),isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([eE.validate(),eG.validate(),eF.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Tags:{hasError:!!eB.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eB.validate()];case 1:return[2,!e.sent()]}})})},Icon:{hasError:!!eD.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eD.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(eW.value===i.ReplImage?eX.error:eN.error),isValid:(0,h._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:if(eW.value!==i.ReplImage)return[3,2];return[4,eX.validate()];case 1:return e=!t.sent(),[3,4];case 2:return[4,eN.validate()];case 3:e=!t.sent(),t.label=4;case 4:return[2,e]}})})},Publishing:{hasError:!!eL.error,isValid:(0,h._)(function(){return(0,m.Jh)(this,function(e){switch(e.label){case 0:return[4,eL.validate()];case 1:return[2,!e.sent()]}})})}},tu=ts[e4].hasError,tc=ts[e4].isValid,th=null!==(e_=tY.find(function(e){return ts[e].hasError}))&&void 0!==e_?e_:null,tf=null;eV?eU||eM||eK?tf="Something went wrong - please try again":tu&&(tf="Please fill out the the form"):tf="Please select a Repl";var tv=!!(!eV||tu||eU||ek||ej||eO),tm=!!eL.value,tb=(ew=(0,h._)(function(e){var t;return(0,m.Jh)(this,function(n){switch(n.label){case 0:if(t=tv)return[3,2];return[4,tc()];case 1:t=!n.sent(),n.label=2;case 2:if(t)return[2];n.label=3;case 3:return n.trys.push([3,5,,6]),e2(e),[4,ez()];case 4:return n.sent(),[3,6];case 5:return n.sent(),[2];case 6:return[2]}})}),function(e){return ew.apply(this,arguments)}),ty=e1>0;return(0,a.tZ)(ea.Provider,{value:eP,children:(0,a.BX)(ed.Tg,{css:[d.l0.borderRadius(8),d.l0.flex.row,d.l0.overflow("hidden"),(0,l._)({},(0,em.et)("tabletMax"),{minWidth:850})],background:"default",dataCy:"publish-form-container",children:[(0,a.BX)(s.G,{css:[d.l0.colWithGap(12),d.l0.p(16),d.l0.minWidth(320),d.l0.flex.growAndShrink(1),(0,l._)({},(0,em.et)("tabletMin"),{maxWidth:320})],children:[(0,a.tZ)(o.xv,{variant:"subheadBig",multiline:!1,children:e$?"Edit Publish Settings":"Publish ".concat(eC?"this":"a"," Repl")}),(0,a.BX)(tJ,{onSubmit:(eZ=(0,h._)(function(e){var t,n,r,i,l,a;return(0,m.Jh)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),!e3)return[3,13];t=!0,n=!1,r=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),i=tY[Symbol.iterator](),o.label=2;case 2:if(t=(l=i.next()).done)return[3,5];return[4,ts[l.value].isValid()];case 3:if(!o.sent())return[2];o.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return a=o.sent(),n=!0,r=a,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(n)throw r}return[7];case 8:if(e$)return[3,10];return[4,eA()];case 9:return o.sent(),e6({show:!0,isUpdate:!1}),[3,12];case 10:return[4,ez()];case 11:o.sent(),e6({show:!0,isUpdate:!0}),o.label=12;case 12:return[3,14];case 13:tb(e1+1),o.label=14;case 14:return[2]}})}),function(e){return eZ.apply(this,arguments)}),css:[d.l0.colWithGap(16),d.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(s.G,{css:[d.l0.rowWithGap(4),d.l0.align.center],children:tY.map(function(e,t){return(0,a.BX)(P.Fragment,{children:[0!==t&&(0,a.tZ)(ex,{}),(0,a.tZ)(eR,{isActive:e1===t,isComplete:e9[t],onClick:function(){return tb(t)},disabled:tv,children:e})]},e)})}),(0,a.BX)(s.G,{css:d.l0.flex.growAndShrink(1),children:["Basics"===e4&&(0,a.tZ)(eQ,{}),"Tags"===e4&&(0,a.tZ)(tL,{}),"Icon"===e4&&(0,a.tZ)(tp,{}),"Cover page"===e4&&(0,a.tZ)(td,{fs:eH}),"Publishing"===e4&&(0,a.tZ)(tg,{})]}),(0,a.BX)(s.G,{children:[e3&&th&&th!==e4?(0,a.tZ)(ec.E,{colorway:"negative",icon:(0,a.tZ)(eg.Z,{}),text:"Please fix error in ".concat(th," section")}):null,eM?(0,a.tZ)(ec.E,{colorway:"negative",icon:(0,a.tZ)(eg.Z,{}),text:eM}):null,eK?(0,a.tZ)(ec.E,{colorway:"negative",icon:(0,a.tZ)(eg.Z,{}),text:eK}):null]}),(0,a.BX)(s.G,{css:[d.l0.rowWithGap(8),d.l0.align.center,ty?d.l0.justify.spaceBetween:d.l0.justify.end],children:[ty?(0,a.tZ)(eu.zx,{type:"button",iconLeft:(0,a.tZ)(eh.Z,{}),disabled:tv,onClick:function(){return tb(e1-1)},text:"Back"}):null,ej?(0,a.tZ)(s.G,{css:[d.l0.rowWithGap(4),d.l0.color.foregroundDimmer],children:(0,a.tZ)(c.Z,{})}):null,(0,a.BX)(ep.u,{tooltip:tf,placement:"bottom",isDisabled:!tf,children:[!e3&&(0,a.tZ)(eu.zx,{type:"submit",colorway:"primary",iconLeft:(0,a.tZ)(ef.Z,{}),disabled:tv,text:"Next",dataCy:"publish-form-next-button"}),e3&&!e$?(0,a.tZ)(eu.zx,{type:"submit",colorway:"primary",css:[{boxShadow:"0px 0px 16px 0px ".concat(d.TV.accentPrimaryDimmer," !important")}],iconLeft:(0,a.tZ)(ev.Z,{}),disabled:!!(tv||th),text:eO?tm?"Submitting...":"Publishing...":tm?"Submit Template":"Publish to Community",dataCy:"publish-form-publish-button"}):null,e3&&e$?(0,a.tZ)(eu.zx,{type:"submit",colorway:"primary",iconLeft:(0,a.tZ)(ev.Z,{}),disabled:!!(tv||th),text:ej?"Saving...":"Save"}):null]})]})]})]}),(0,a.tZ)(tH,{user:eT})]})})}function tQ(e){var t,n,r=e.replId,i=e.source,h=(0,p.NH)(),f=(null===(n=h.data)||void 0===n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?h.data.currentUser:null;return h.loading?(0,a.tZ)(s.G,{css:[d.l0.center,d.l0.p(32),d.l0.width(512),(0,l._)({},"@media (max-width: ".concat(u.j.tabletMin,"px)"),[{width:"100%"}])],children:(0,a.tZ)(c.Z,{})}):h.error||!f?(0,a.tZ)(s.G,{css:[d.l0.center,d.l0.p(32)],children:(0,a.tZ)(o.xv,{multiline:!1,children:"Something went wrong, please try again."})}):(0,a.tZ)(tq,{source:i,replId:r,currentUser:f})}},28800:function(e,t,n){n.d(t,{q:function(){return Z}});var r=n(42516),i=n(41733),l=n(30509),a=n(74985),o=n(61967),s=n(34186),u=n(85638),c=n(64479),d=n(82230),p=n(94778),h=n(60772),f=n(1383),v=n(76677),g=n(72093),m=n(85438),b=n(47336),y=n.n(b),w=n(12202),Z=function(e){var t=e.repl,n=e.isUpdate,b=(0,o.j3)(t),Z=t.url?(0,o.QB)(t):"",_=t.publishedAs===m.O2.Template,x=(0,s.Z)({text:"Check out what I just published on Replit: ".concat(t.title),url:Z});return(0,a.BX)(c.Tg,{background:"default",css:[g.l0.borderRadius(8),g.l0.overflow("hidden"),g.l0.colWithGap(16),g.l0.width(510),g.l0.p(16),g.l0.flex.growAndShrink(1),(0,r._)({},"@media (max-width: ".concat(h.j.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,a.BX)(p.G,{css:[g.l0.colWithGap(16)],children:[(0,a.BX)(d.xv,{variant:"subheadBig",multiline:!1,children:[_?"Template":"Repl"," ",n?"updated":"published","!"]})," ",(0,a.BX)(p.G,{css:[g.l0.colWithGap(4)],children:[(0,a.tZ)(d.xv,{variant:"small",css:[g.l0.color.foregroundDimmer],multiline:!1,children:"Cover page link"}),(0,a.BX)(p.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,a.tZ)(y(),(0,l._)((0,i._)({legacyBehavior:!0},b),{css:[g.l0.flex.growAndShrink(1)],children:(0,a.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:Z})})),(0,a.tZ)(w.m,{tooltipDelay:"none",tooltipText:"Copy link",textToCopy:Z})]})]})]}),(0,a.BX)(p.G,{css:[g.l0.rowWithGap(12),g.l0.justify.end,(0,r._)({alignItems:"flex-end"},g.BC.max("mobileMax"),[g.l0.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],children:[(0,a.tZ)(u.Z,{prefetch:!1,href:x,iconLeft:(0,a.tZ)(v.Z,{}),text:"Share to Twitter",target:"_blank",css:[(0,r._)({},g.BC.max("mobileMax"),[g.l0.mr(0)])]}),(0,a.tZ)(u.Z,{iconRight:(0,a.tZ)(f.Z,{}),text:_?"Go to Templates":"Go to Community",href:_?{pathname:"/templates/templates"}:{pathname:"/postsFeed",query:{order:"new"}},as:_?"/templates":"/community/all"})]})]})}},47048:function(e,t,n){n.d(t,{r:function(){return b}});var r=n(27387),i=n(66626),l=n(96583),a=n(41733),o=n(21262),s=n(71440),u=n(60100),c=n(99165);function d(){var e=(0,o._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function p(){var e=(0,o._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var h={},f=(0,s.Ps)(d(),u.FW),v=(0,s.Ps)(p(),u.FW),g="Something went wrong publishing your Template";function m(e){if(e.error)return e.error.message||g;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return g}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return g}}}function b(){var e,t,n,o,s=(0,i._)((e=(0,a._)({},h,void 0),c.D(f,e)),2),u=s[0],d=s[1],p=(0,i._)((t=(0,a._)({},h,void 0),c.D(v,t)),2),b=p[0],y=p[1];return{createRelease:(n=(0,r._)(function(e){var t,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,d.loading||y.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,b({refetchQueries:["ReplEnvironmentHeader"],variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:m(n)}];case 3:return r.sent(),[2,{data:null,error:g}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),createDeployment:(o=(0,r._)(function(e){var t,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,d.loading||y.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u({variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:m(n)}];case 3:return r.sent(),[2,{data:null,error:g}];case 4:return[2]}})}),function(e){return o.apply(this,arguments)}),data:d.data||y.data,loading:d.loading||y.loading,error:m(d||y)}}},92031:function(e,t,n){n.d(t,{W:function(){return m},Z:function(){return b}});var r=n(41733),i=n(30509),l=n(66626),a=n(74985),o=n(71730),s=n(73064),u=n(72333),c=n(64479),d=n(94778),p=n(76575),h=n(29318),f=n(76171),v=n(72093),g=n(50959);function m(e){var t=(0,l._)((0,g.useState)(null),2),n=t[0],a=t[1],s=(0,l._)((0,g.useState)(null),2),u=s[0],c=s[1],d=(0,o.Z)({onUpload:function(t){var n=t.url;a(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;c(null),a(t)},onError:function(e){a(null),c(e.message)}}),p=(0,g.useCallback)(function(){return c(null)},[]);return(0,i._)((0,r._)({},d),{error:u,clearError:p,previewUrl:n})}function b(e){var t=(0,g.useRef)(null),n=e.size||48;return(0,a.BX)(d.G,{css:[v.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,a.BX)(a.HY,{children:[(0,a.tZ)(u.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,a.tZ)(c.Tg,{className:"surface",elevated:!0,css:[v.l0.borderRadius(8),v.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,a.tZ)(d.G,{className:"icon",css:[v.l0.coverContainer,v.l0.center,v.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,a.tZ)(h.Z,{}):(0,a.tZ)(p.Z,{})})]}):(0,a.tZ)(d.G,{css:[v.l0.center,v.l0.width(n),v.l0.height(n),v.l0.borderRadius(8),v.l0.color.foregroundDimmer,{border:"1px dashed "+v.TV.outlineDefault,"&:hover":{color:v.TV.accentPrimaryDefault,borderColor:v.TV.accentPrimaryDefault}}],children:(0,a.tZ)(f.Z,{})}),(0,a.tZ)("input",{css:[[v.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:t,accept:s.W9.join(","),type:"file",onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var l=i?i[0]:null;l&&e.onUpload(l)}}})]})}},85447:function(e,t,n){var r=n(42516),i=n(41733),l=n(30509),a=n(98924),o=n(74985),s=n(28266),u=n.n(s),c=n(97754),d=n.n(c),p=n(72602);n(50959),t.Z=function(e){var t,n=e.level,s=e.fontFamily,c=void 0===s?"sans-serif":s,h=e.fontWeight,f=void 0===h?"medium":h,v=e.foreground,g=void 0===v?1:v,m=e.align,b=void 0===m?"left":m,y=e.truncate,w=e.className,Z=void 0===w?"":w,_=e.children,x=(0,a._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children"]);return(0,o.BX)("h".concat(n),(0,l._)((0,i._)({},x),{className:u().dynamic([["e5be6eb40aa527b5",[p.Z.levels[n],p.Z.fontFamily[c],p.Z.fontWeight[f],p.Z.foreground[g],b]]])+" "+(d()("heading",(t={},(0,r._)(t,Z,!!Z),(0,r._)(t,"truncate",void 0!==y&&y),t))||""),children:[_,(0,o.tZ)(u(),{id:"e5be6eb40aa527b5",dynamic:[p.Z.levels[n],p.Z.fontFamily[c],p.Z.fontWeight[f],p.Z.foreground[g],b],children:".heading.__jsx-style-dynamic-selector{font-size:".concat(p.Z.levels[n],";font-family:").concat(p.Z.fontFamily[c],";font-weight:").concat(p.Z.fontWeight[f],";color:").concat(p.Z.foreground[g],";text-align:").concat(b,"}.truncate.__jsx-style-dynamic-selector{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:100%}")})]}))}},96372:function(e,t,n){n.d(t,{b:function(){return o}});var r=n(74985),i=n(28266),l=n.n(i),a=n(72602),o=function(e){return"number"==typeof e&&e>0&&e in a.Z.spacing?a.Z.spacing[e]:e};t.Z=function(e){var t=e.size,n=e.width,i=void 0===n?1:n,a=e.height,s=void 0===a?1:a,u=t&&o(t);return(0,r.tZ)("div",{className:l().dynamic([["a1e4519405658715",[u||o(i),u||o(s)]]]),children:(0,r.tZ)(l(),{id:"a1e4519405658715",dynamic:[u||o(i),u||o(s)],children:"div.__jsx-style-dynamic-selector{width:".concat(u||o(i),";height:").concat(u||o(s),";-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none}")})})}},24857:function(e,t,n){n.d(t,{Ug:function(){return f},gC:function(){return v}});var r=n(41733),i=n(30509),l=n(98924),a=n(74985),o=n(28266),s=n.n(o);n(50959);var u=n(97754),c=n.n(u),d=n(96372),p=function(e){return"start"===e||"end"===e?"flex-".concat(e):e},h=function(e){var t=e.dir,n=void 0===t?"row":t,o=e.spacing,u=void 0===o?0:o,h=e.align,f=void 0===h?"start":h,v=e.justify,g=void 0===v?"start":v,m=e.isInline,b=void 0!==m&&m,y=e.isReversed,w=void 0!==y&&y,Z=e.wrap,_=void 0===Z?"wrap":Z,x=e.constrainWidth,R=e.tag,C=void 0===R?"div":R,S=e.className,T=e.children,I=(0,l._)(e,["dir","spacing","align","justify","isInline","isReversed","wrap","constrainWidth","tag","className","children"]),P=w?"".concat(n,"-reverse"):n,V="row"===n;return(0,a.BX)(C,(0,i._)((0,r._)({},I),{className:s().dynamic([["da9a798c9b4d5e1c",[C,b?"inline-flex":"flex",P,p(f),p(g),_,w?"left":"right",(0,d.b)(u),w?"left":"right",w?"top":"bottom",(0,d.b)(u),w?"top":"bottom"]]])+" "+(I&&null!=I.className&&I.className||c()(S,{"h-stack":V,"v-stack":!V,"constrain-width":void 0!==x&&x})||""),children:[T,(0,a.tZ)(s(),{id:"da9a798c9b4d5e1c",dynamic:[C,b?"inline-flex":"flex",P,p(f),p(g),_,w?"left":"right",(0,d.b)(u),w?"left":"right",w?"top":"bottom",(0,d.b)(u),w?"top":"bottom"],children:"".concat(C,".__jsx-style-dynamic-selector{display:").concat(b?"inline-flex":"flex",";-webkit-flex-direction:").concat(P,";-ms-flex-direction:").concat(P,";flex-direction:").concat(P,";-webkit-box-align:").concat(p(f),";-webkit-align-items:").concat(p(f),";-moz-box-align:").concat(p(f),";-ms-flex-align:").concat(p(f),";align-items:").concat(p(f),";-webkit-box-pack:").concat(p(g),";-webkit-justify-content:").concat(p(g),";-moz-box-pack:").concat(p(g),";-ms-flex-pack:").concat(p(g),";justify-content:").concat(p(g),";-webkit-flex-wrap:").concat(_,";-ms-flex-wrap:").concat(_,";flex-wrap:").concat(_,"}.h-stack.__jsx-style-dynamic-selector>*{margin-").concat(w?"left":"right",":").concat((0,d.b)(u),"}.h-stack.__jsx-style-dynamic-selector>*:last-child{margin-").concat(w?"left":"right",":0}.v-stack.__jsx-style-dynamic-selector>*{margin-").concat(w?"top":"bottom",":").concat((0,d.b)(u),"}.v-stack.__jsx-style-dynamic-selector>*:last-child{margin-").concat(w?"top":"bottom",":0}.constrain-width.__jsx-style-dynamic-selector{max-width:100%}")})]}))},f=function(e){return(0,a.tZ)(h,(0,i._)((0,r._)({},e),{dir:"row"}))},v=function(e){return(0,a.tZ)(h,(0,i._)((0,r._)({},e),{dir:"column"}))}},38414:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(27387),i=n(66626),l=n(78950),a=n(63257),o=n(96583),s=n(74985),u=n(94311),c=n(45271),d=n(72093),p=n(30124),h=n(85447),f=n(24857),v=n(72121),g=n(50959),m=n(41733),b=n(21262),y=n(71440),w=n(58995);function Z(){var e=(0,b._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return Z=function(){return e},e}var _={},x=(0,y.Ps)(Z()),R=n(1813),C=n(43312),S=n(49224),T=(0,C.iv)({".sentry-error-embed-wrapper":{zIndex:"".concat(d.n0," !important")}}),I=(0,S.X)({errorStack:[d.l0.p(16),d.l0.width("100%"),d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.overflowY("hidden"),{whiteSpace:"pre"}],errorStackContent:[d.l0.font.code,d.l0.fontSize(12)],error:[d.l0.font.code]}),P=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,V=/at (https:\/\/.+\.js):(\d+):(\d+)/;function k(){return(k=(0,r._)(function(e){var t,s,u,c,d,p,h,f;function v(){return(v=(0,r._)(function(e){var n,r,i;return(0,o.Jh)(this,function(l){switch(l.label){case 0:if(n=t.get(e))return[2,n];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=l.sent(),i=new s.SourceMapConsumer(r),t.set(e,i),[2,i];case 3:return l.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,o.Jh)(this,function(g){switch(g.label){case 0:t=new Map,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,n.e(4552).then(n.t.bind(n,94552,19))];case 2:return s=g.sent(),[3,4];case 3:throw g.sent(),Error("source-map not available");case 4:var m;if(!(u=e.stack))throw Error("expected error.stack to be defined");return c=u.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),p=(d=(0,l._)(c))[0],[4,Promise.all(d.slice(1).map((m=(0,r._)(function(e){var t,n,r,l,a,s,u,c,d,p;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(P.test(e)){if(!(a=P.exec(e)))throw Error("expected result");n=(s=(0,i._)(a.slice(2),3))[0],r=s[1],l=s[2]}else{if(!V.test(e))return[2,e];if(!(u=V.exec(e)))throw Error("expected result");n=(c=(0,i._)(u.slice(1),3))[0],r=c[1],l=c[2]}return[4,function(e){return v.apply(this,arguments)}("".concat(n,".map"))];case 1:if(!(d=o.sent()))return[2,"    ".concat(e)];if(p=d.originalPositionFor({line:Number(r),column:Number(l)}),t)return[2,"    at ".concat(p.name," (").concat(p.source,":").concat(p.line,":").concat(p.column,")")];return[2,"    at ".concat(p.source,":").concat(p.line,":").concat(p.column)]}})}),function(e){return m.apply(this,arguments)})))];case 5:return h=g.sent(),Object.assign(f=Error(),{name:e.name,stack:[p].concat((0,a._)(h)).join("\n"),message:e.message},e),[2,f]}})})).apply(this,arguments)}var U=function(e){var t=e.bsod,n=(0,i._)((0,g.useState)(null),2),l=n[0],a=n[1];(0,g.useEffect)(function(){(0,r._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return k.apply(this,arguments)}(t.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[t.error]);var u=(0,g.useMemo)(function(){var e,n,r,i;return l?null!==(r=null===(n=l.stack)||void 0===n?void 0:n.split("\n"))&&void 0!==r?r:[]:null!==(i=null===(e=t.error.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==i?i:[]},[l,t.error.stack]);return(0,s.tZ)("div",{css:I.errorStack,children:(0,s.tZ)(f.gC,{spacing:1,children:(0,s.BX)("div",{css:I.errorStackContent,children:[(0,s.BX)("div",{children:["Origin: ",t.origin]}),null==u?void 0:u.map(function(e,t){var n=e.replace("webpack-internal:///./",""),r=n.includes("node_modules");return(0,s.tZ)("div",{css:r&&d.l0.color.foregroundDimmest,children:n},t)})]})})})},E=function(){var e,t,n,r=(0,i._)((0,R.qg)(),1)[0],l=(e=(0,m._)({},_,{skip:!r}),w.a(x,e)),a=l.data,o=l.loading;if((0,R.ic)(),!r)return null;var g=(null==a?void 0:null===(t=a.currentUser)||void 0===t?void 0:t.isStaff)||(null==a?void 0:null===(n=a.currentUser)||void 0===n?void 0:n.isAdmin);return(0,s.BX)(c.u,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,s.BX)(f.gC,{spacing:2,align:"center",children:[(0,s.tZ)(h.Z,{level:2,children:" Your Repl is having a bit of trouble."}),(0,s.tZ)("div",{className:"spacer"}),(0,s.tZ)(v.Z,{size:"large",children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,s.tZ)("div",{css:[d.l0.p(16),d.l0.width("100%"),d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8)],children:(0,s.BX)(f.gC,{spacing:1,children:[!o&&(null==a?void 0:a.currentUser)?(0,s.BX)(f.Ug,{spacing:2,align:"center",children:[(0,s.tZ)(u.q,{src:a.currentUser.image,username:a.currentUser.username,size:48}),(0,s.tZ)(v.Z,{size:"medium",children:a.currentUser.username})]}):null,(0,s.BX)("div",{css:I.error,children:["Error: ",r.eventId]})]})}),g?(0,s.tZ)(U,{bsod:r}):null,(0,s.tZ)("div",{className:"spacer"}),(0,s.tZ)(p.Z,{onClick:function(){return window.location.reload()},color:"primary",filled:!0,fullWidth:!0,children:"reload"}),!1]}),(0,s.tZ)(C.xB,{styles:[T]})]})}}}]);
//# sourceMappingURL=4854-5008fd2fb1fe40d3.js.map