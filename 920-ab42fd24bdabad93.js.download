!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="6a3af276-721b-43a2-8b8f-a368661dcdab",e._sentryDebugIdIdentifier="sentry-dbid-6a3af276-721b-43a2-8b8f-a368661dcdab")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"ec45b404"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[920],{50920:function(e,n,t){t.d(n,{Z:function(){return ev}});var o,r,i=t(66626),l=t(74985),s=t(61967),u=t(69170),a=t(15235),d=t(82230),c=t(94778),p=t(44049),m=t(72093),h=t(41733),f=t(21262),v=t(71440),b=t(99165);function g(){var e=(0,f._)(["\n  mutation HidePostToggleHiddenPost($postId: Int!, $isHidden: Boolean!) {\n    toggleHiddenPost(postId: $postId, isHidden: $isHidden) {\n      ... on Post {\n        id\n        isHidden\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return g=function(){return e},e}var Z={},w=(0,v.Ps)(g()),y=c.K.form;function C(e){var n,t,o=e.post,r=e.onDone,s=(0,u.Z)(),f=s.showConfirm,v=s.showError,g=(0,i._)((n={variables:{postId:o.id,isHidden:!o.isHidden},onCompleted:function(e){"Post"===e.toggleHiddenPost.__typename?o.isHidden?f("Post removed from the community."):f("Post allowed on community."):"NotFoundError"===e.toggleHiddenPost.__typename||"UserError"===e.toggleHiddenPost.__typename?v(e.toggleHiddenPost.message):v("An unexpected error occurred."),r()},onError:function(){v("Something went wrong. Please try again.")}},t=(0,h._)({},Z,n),b.D(w,t)),2),C=g[0],D=g[1].loading,T=o.isHidden?"Yes, show this post":"Yes, hide this post",_=o.isHidden?"Showing...":"Hiding...",R=o.isHidden?"Show this post to the Community":"Hide this post from the Community";return(0,l.BX)(c.G,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(d.xv,{variant:"subheadBig",children:R}),(0,l.BX)(y,{onSubmit:function(e){e.preventDefault(),C()},css:[m.l0.colWithGap(32)],children:[(0,l.tZ)(d.xv,{children:"Hiding a post will remove it from the Community feeds, but the post will still be viewable to the creator. Showing a post will make it so all users will be able to discover this post though community feeds."}),(0,l.BX)(c.G,{css:[m.l0.rowWithGap(8),m.l0.justify.end],children:[(0,l.tZ)(c.G,{children:(0,l.tZ)(a.zx,{type:"button",text:"Cancel",onClick:r})}),(0,l.tZ)(c.G,{children:(0,l.tZ)(a.zx,{disabled:D,colorway:"negative",text:D?_:T,type:"submit",iconLeft:(0,l.tZ)(p.Z,{})})})]})]})]})}var D=t(18060),T=t(97486),_=t(50959);function R(){var e=(0,f._)(["\n  mutation BanUserFromCommunity($username: String!, $reason: String!) {\n    banCommunityUser(username: $username, reason: $reason) {\n      ... on BannedBoardUser {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return R=function(){return e},e}var G={},x=(0,v.Ps)(R()),E=c.K.form;function B(e){var n,t=e.username,o=e.onDone,r=(0,i._)((0,_.useState)(""),2),s=r[0],p=r[1],f=(0,u.Z)(),v=f.showConfirm,g=f.showError,Z=(0,i._)((n=(0,h._)({},G,{onCompleted:function(e){var n=e.banCommunityUser;"UserError"===n.__typename?g(n.message):v("The user has been banned.")}}),b.D(x,n)),2),w=Z[0],y=Z[1].loading;return(0,l.BX)(c.G,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(d.h4,{level:1,variant:"headerDefault",children:"Ban the author of the Repl?"}),(0,l.tZ)(d.xv,{children:"Are you sure you want to ban this user? All their Repls will be deleted and they will no longer be able to access their account."}),(0,l.BX)(E,{onSubmit:function(e){e.preventDefault(),s&&t?(w({variables:{username:t,reason:s}}),o()):g("Please provide a reason.")},css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(c.G,{css:[m.l0.colWithGap(8)],children:(0,l.tZ)(D.B,{placeholder:"Reason for banning the user",value:s,onChange:function(e){return p(e.currentTarget.value)},css:{resize:"none",minHeight:40}})}),(0,l.BX)(c.G,{css:[m.l0.rowWithGap(8),m.l0.justify.end],children:[(0,l.tZ)(a.zx,{type:"button",text:"Cancel",onClick:function(){return o()}}),(0,l.tZ)(a.zx,{disabled:y,colorway:"negative",text:y?"Banning user...":"Yes, ban this user",type:"submit",iconLeft:(0,l.tZ)(T.Z,{})})]})]})]})}var P=t(11721);function H(){var e=(0,f._)(["\n  mutation ReportRepl($replId: String, $reason: String!) {\n    createBoardReport(replId: $replId, reason: $reason) {\n      id\n    }\n  }\n"]);return H=function(){return e},e}var U={},W=(0,v.Ps)(H()),k=c.K.form;function I(e){var n,t=e.replId,o=e.onDone,r=(0,i._)((0,_.useState)(""),2),s=r[0],p=r[1],f=(0,u.Z)(),v=f.showConfirm,g=f.showError,Z=(0,i._)((n=(0,h._)({},U,{variables:{replId:t,reason:s},onCompleted:function(){v("Repl reported"),o()},onError:function(e){g(e.message)}}),b.D(W,n)),2),w=Z[0],y=Z[1].loading;return(0,l.BX)(c.G,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(d.xv,{variant:"subheadBig",multiline:!1,children:"Report Repl"}),(0,l.BX)(k,{onSubmit:function(e){e.preventDefault(),s?w():g("Not reported. No reason specified.")},css:[m.l0.colWithGap(32)],children:[(0,l.tZ)(c.G,{css:[m.l0.colWithGap(8)],children:(0,l.tZ)(D.B,{placeholder:"Why do you want to report this Repl?",value:s,onChange:function(e){return p(e.currentTarget.value)},css:[m.l0.minHeight(64),m.l0.maxHeight(128),{resize:"vertical"}]})}),(0,l.BX)(c.G,{css:[m.l0.rowWithGap(16),m.l0.justify.end],children:[(0,l.tZ)(c.G,{children:(0,l.tZ)(a.zx,{type:"button",text:"Cancel",onClick:function(){return o()}})}),(0,l.tZ)(c.G,{children:(0,l.tZ)(a.zx,{disabled:y,text:y?"Reporting":"Report Repl",type:"submit",colorway:"negative",iconLeft:(0,l.tZ)(P.Z,{}),onClick:function(){return o()}})})]})]})]})}var S=t(87128);function z(){var e=(0,f._)(["\n  mutation WarnUser($username: String!, $reason: String!) {\n    warnUser(username: $username, reason: $reason) {\n      ... on Warning {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return z=function(){return e},e}var A={},X=(0,v.Ps)(z()),$=c.K.form;function N(e){var n,t=e.username,o=e.onDone,r=(0,i._)((0,_.useState)(""),2),s=r[0],p=r[1],f=(0,u.Z)(),v=f.showConfirm,g=f.showError,Z=(0,i._)((n=(0,h._)({},A,{onCompleted:function(e){var n=e.warnUser;"UserError"===n.__typename?g(n.message):v("The user has been warned.")}}),b.D(X,n)),2),w=Z[0],y=Z[1].loading;return(0,l.BX)(c.G,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(d.h4,{level:1,variant:"headerDefault",children:"Warn the author of the Repl?"}),(0,l.BX)($,{onSubmit:function(e){e.preventDefault(),s&&t?(w({variables:{username:t,reason:s}}),o()):g("Please provide a reason.")},css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(D.B,{placeholder:"Reason for warning the user",value:s,onChange:function(e){return p(e.currentTarget.value)},css:{resize:"none",minHeight:40}}),(0,l.BX)(c.G,{css:[m.l0.rowWithGap(8),m.l0.justify.end],children:[(0,l.tZ)(a.zx,{type:"button",text:"Cancel",onClick:function(){return o()}}),(0,l.tZ)(a.zx,{disabled:y,colorway:"negative",text:y?"Warning user...":"Yes, warn this user",type:"submit",iconLeft:(0,l.tZ)(S.Z,{})})]})]})]})}var O=t(13033),q=t(45271),M=t(8261),L=t(49224),j=t(1712),F=t(74042),Y=t(76575),K=t(72452),J=t(62435),V=t(85438),Q=t(85421),ee=t(27387),en=t(96583),et=t(33204);function eo(){var e=(0,f._)(["\n  mutation ReviewTemplateReview($input: ReviewTemplateInput!) {\n    reviewTemplate(input: $input) {\n      ... on TemplateReview {\n        id\n        repl {\n          id\n          ...ReplViewReplActionsPermissions\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return eo=function(){return e},e}var er={},ei=(0,v.Ps)(eo(),et.jN),el=c.K.form;function es(e){var n,t,o=e.replId,r=e.reviewType,s=e.onDone,p=(0,u.Z)(),f=p.showConfirm,v=p.showError,g="Something went wrong ".concat("promote"===r?"promoting":"demoting"," this Template"),Z=(0,i._)((n=(0,h._)({},er,{variables:{input:{replId:o,shouldPromote:"promote"===r}},onError:function(e){v(e.message)},onCompleted:function(e){"TemplateReview"===e.reviewTemplate.__typename?(f("Template successfully ".concat("promote"===r?"promoted":"demoted")),s()):"UnauthorizedError"===e.reviewTemplate.__typename||"UserError"===e.reviewTemplate.__typename?v(e.reviewTemplate.message):v(g)}}),b.D(ei,n)),2),w=Z[0],y=Z[1];return(0,l.BX)(c.G,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(d.h4,{level:1,variant:"headerDefault",children:"promote"===r?"Promote Template":"Demote Template?"}),(0,l.BX)(el,{onSubmit:(t=(0,ee._)(function(e){return(0,en.Jh)(this,function(n){return e.preventDefault(),w(),[2]})}),function(e){return t.apply(this,arguments)}),css:[m.l0.colWithGap(24)],children:["promote"===r?(0,l.tZ)(d.xv,{children:"Promoting a Template will show the Template in the Create Repl modal."}):(0,l.tZ)(d.xv,{children:"Demoting a Template will remove the Template from the Create Repl modal."}),(0,l.BX)(c.G,{css:[m.l0.rowWithGap(8),m.l0.justify.end],children:[(0,l.tZ)(a.zx,{type:"button",text:"Cancel",onClick:function(){return s()}}),"promote"===r?(0,l.tZ)(a.zx,{type:"submit",disabled:y.loading,colorway:"primary",iconLeft:(0,l.tZ)(F.Z,{}),text:y.loading?"Promoting Template...":"Promote Template"}):(0,l.tZ)(a.zx,{type:"submit",disabled:y.loading,colorway:"negative",iconLeft:(0,l.tZ)(j.Z,{}),text:y.loading?"Demoting Template...":"Demote Template"})]})]})]})}var eu=t(84573),ea=t(60100);function ed(){var e=(0,f._)(["\n  mutation UnpublishTemplate($input: DeleteReplDeploymentInput!) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ed=function(){return e},e}var ec={},ep=(0,v.Ps)(ed(),ea.FW),em=c.K.form;function eh(e){var n,t,o=e.replId,r=e.onDone,s=(0,u.Z)(),f=s.showConfirm,v=s.showError,g=(0,i._)((n=(0,h._)({},ec,{variables:{input:{replId:o}}}),b.D(ep,n)),2),Z=g[0],w=g[1];return(0,l.BX)(c.G,{css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(d.h4,{level:1,variant:"headerDefault",children:"Unpublish Template from Community?"}),(0,l.BX)(em,{onSubmit:(t=(0,ee._)(function(e){var n,t,o,i;return(0,en.Jh)(this,function(l){switch(l.label){case 0:e.preventDefault(),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Z()];case 2:return i=l.sent(),[3,4];case 3:return l.sent(),v("Something went wrong. Please try again."),[3,4];case 4:if((null==i?void 0:null===(n=i.data)||void 0===n?void 0:n.deleteReplDeployment.__typename)==="Repl")f("Template successfully unpublished");else if((null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.deleteReplDeployment.__typename)==="NotFoundError"||(null==i?void 0:null===(o=i.data)||void 0===o?void 0:o.deleteReplDeployment.__typename)==="UserError")return v(i.data.deleteReplDeployment.message),[2];return r(),[2]}})}),function(e){return t.apply(this,arguments)}),css:[m.l0.colWithGap(24)],children:[(0,l.tZ)(d.xv,{children:"Unpublishing a Template will remove it from the Templates page. The Repl itself will not be deleted, and you can always re-publish the Template again later."}),(0,l.BX)(c.G,{css:[m.l0.rowWithGap(8),m.l0.justify.end],children:[(0,l.tZ)(a.zx,{type:"button",text:"Cancel",onClick:function(){return r()}}),(0,l.tZ)(a.zx,{disabled:w.loading,colorway:"negative",text:w.loading?"Unpublishing Template...":"Yes, unpublish this Template",type:"submit",iconLeft:(0,l.tZ)(p.Z,{})})]})]})]})}(o=r||(r={})).warnAuthor="warnAuthor",o.banAuthor="banAuthor",o.reportRepl="reportRepl",o.unpublish="unpublish",o.unpublishTemplate="unpublishTemplate",o.promoteTemplate="promoteTemplate",o.demoteTemplate="demoteTemplate",o.modUnpublish="modUnpublish",o.modHide="modHide";var ef=(0,L.X)({item:[m.l0.rowWithGap(8),m.l0.align.center],destructiveItem:[m.l0.color.accentNegativeStronger],modPill:[m.l0.color.foregroundDefault,{textTransform:"uppercase"}]});function ev(e){var n,t,o,r=e.repl,u=e.post,a=e.currentUser,m=e.source,h=(0,i._)((0,_.useState)(null),2),f=h[0],v=h[1],b=new Map,g=(0,Q.useRouter)(),Z="/replEnvironmentDesktop"===g.pathname||"/replEnvironmentMobile"===g.pathname,w=(0,s.aq)(r);if(r.authorizations.editFileContents.isAuthorized&&!Z&&b.set("edit",{label:"Edit in Workspace",onClick:function(){return g.push(w.href,w.as)},icon:(0,l.tZ)(Y.Z,{})}),b.set("report",{label:"Report",isDestructive:!0,onClick:function(){return v("reportRepl")},icon:(0,l.tZ)(P.Z,{})}),(null==a?void 0:a.isModerator)&&(b.set("warning",{label:"Warning",isMod:!0,icon:(0,l.tZ)(S.Z,{}),onClick:function(){return v("warnAuthor")},isDestructive:!0}),b.set("banauthor",{label:"Ban author",isMod:!0,icon:(0,l.tZ)(T.Z,{}),onClick:function(){return v("banAuthor")},isDestructive:!0}),null!==r.lastPublishedAt)){var y=(null==u?void 0:u.isHidden)?(0,l.tZ)(K.Z,{}):(0,l.tZ)(p.Z,{}),D=(null==u?void 0:u.isHidden)?"Show post to Community":"Hide post from Community";u&&b.set("visibility",{label:D,icon:y,isMod:!0,isDestructive:!0,onClick:function(){return v("modHide")}}),b.set("modunpublish",{label:"Unpublish Repl",isMod:!0,icon:(0,l.tZ)(T.Z,{}),isDestructive:!0,onClick:function(){return v("modUnpublish")}})}return((null==a?void 0:a.isAdmin)&&r.publishedAs===V.O2.Template&&((null===(o=r.templateReview)||void 0===o?void 0:o.promoted)?b.set("demote",{label:"Demote Template",icon:(0,l.tZ)(j.Z,{}),isDestructive:!0,onClick:function(){return v("demoteTemplate")}}):b.set("promote",{label:"Promote Template",icon:(0,l.tZ)(F.Z,{}),onClick:function(){return v("promoteTemplate")}})),r.authorizations.publish.isAuthorized&&null!==r.lastPublishedAt&&b.set("unpublish",{label:"Unpublish from Community",icon:(0,l.tZ)(p.Z,{}),isDestructive:!0,onClick:function(){return v("unpublish")}}),r.publishedAs===V.O2.Template&&r.authorizations.publish.isAuthorized&&b.set("unpublishtemplate",{label:"Unpublish Template",icon:(0,l.tZ)(p.Z,{}),isMod:!0,isDestructive:!0,onClick:function(){return v("unpublishTemplate")}}),b.size)?(0,l.BX)(l.HY,{children:[(0,l.tZ)(O.ZE,{icon:(0,l.tZ)(J.Z,{}),onAction:function(e){var n;return null===(n=b.get(e))||void 0===n?void 0:n.onClick()},children:Array.from(b).map(function(e){var n=(0,i._)(e,2),t=n[0],o=n[1];return(0,l.tZ)(O.ck,{children:(0,l.BX)(c.G,{css:[ef.item,o.isDestructive&&ef.destructiveItem],children:[o.icon,(0,l.tZ)(d.xv,{multiline:!1,children:o.label}),o.isMod?(0,l.tZ)(M.D,{text:"mod",css:ef.modPill}):null]})},t)})}),(0,l.tZ)(q.u,{isOpen:"reportRepl"===f,onRequestClose:function(){return v(null)},children:(0,l.tZ)(I,{replId:r.id,onDone:function(){return v(null)}})}),(0,l.tZ)(q.u,{isOpen:"unpublish"===f,onRequestClose:function(){return v(null)},children:(0,l.tZ)(eu.Z,{repl:r,onDone:function(){return v(null)},source:m})}),(0,l.tZ)(q.u,{isOpen:"warnAuthor"===f,onRequestClose:function(){return v(null)},children:(0,l.tZ)(N,{username:null===(n=r.owner)||void 0===n?void 0:n.username,onDone:function(){return v(null)}})}),(0,l.tZ)(q.u,{isOpen:"banAuthor"===f,onRequestClose:function(){return v(null)},children:(0,l.tZ)(B,{username:null===(t=r.owner)||void 0===t?void 0:t.username,onDone:function(){return v(null)}})}),(0,l.tZ)(q.u,{isOpen:"unpublishTemplate"===f,onRequestClose:function(){return v(null)},children:(0,l.tZ)(eh,{replId:r.id,onDone:function(){return v(null)}})}),(0,l.tZ)(q.u,{isOpen:"demoteTemplate"===f,onRequestClose:function(){return v(null)},children:(0,l.tZ)(es,{replId:r.id,reviewType:"demote",onDone:function(){return v(null)}})}),(0,l.tZ)(q.u,{isOpen:"promoteTemplate"===f,onRequestClose:function(){return v(null)},children:(0,l.tZ)(es,{replId:r.id,reviewType:"promote",onDone:function(){return v(null)}})}),(0,l.tZ)(q.u,{isOpen:"modUnpublish"===f,onRequestClose:function(){return v(null)},children:(0,l.tZ)(eu.Z,{repl:r,onDone:function(){return v(null)},source:m})}),u&&(0,l.tZ)(q.u,{isOpen:"modHide"===f,onRequestClose:function(){return v(null)},children:(0,l.tZ)(C,{post:u,onDone:function(){return v(null)}})})]}):null}}}]);
//# sourceMappingURL=920-ab42fd24bdabad93.js.map